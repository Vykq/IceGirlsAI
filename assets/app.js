/*! For license information please see app.js.LICENSE.txt */
(()=>{var e={710:function(e){function t(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function n(e,n,o){n&&t(e.prototype,n),o&&t(e,o),Object.defineProperty(e,"prototype",{writable:!1})}var o;o=function(){"use strict";var e="(prefers-reduced-motion: reduce)";function t(e){e.length=0}function o(e,t,n){return Array.prototype.slice.call(e,t,n)}function r(e){return e.bind.apply(e,[null].concat(o(arguments,1)))}function s(){}var i=setTimeout;function a(e){return requestAnimationFrame(e)}function c(e,t){return typeof t===e}function l(e){return!p(e)&&c("object",e)}var d=Array.isArray,u=r(c,"function"),h=r(c,"string"),m=r(c,"undefined");function p(e){return null===e}function f(e){try{return e instanceof(e.ownerDocument.defaultView||window).HTMLElement}catch(e){return!1}}function g(e){return d(e)?e:[e]}function v(e,t){g(e).forEach(t)}function y(e,t){return-1<e.indexOf(t)}function w(e,t){return e.push.apply(e,g(t)),e}function L(e,t,n){e&&v(t,(function(t){t&&e.classList[n?"add":"remove"](t)}))}function S(e,t){L(e,h(t)?t.split(" "):t,!0)}function b(e,t){v(t,e.appendChild.bind(e))}function E(e,t){v(e,(function(e){var n=(t||e).parentNode;n&&n.insertBefore(e,t)}))}function x(e,t){return f(e)&&(e.msMatchesSelector||e.matches).call(e,t)}function q(e,t){return e=e?o(e.children):[],t?e.filter((function(e){return x(e,t)})):e}function C(e,t){return t?q(e,t)[0]:e.firstElementChild}var k=Object.keys;function _(e,t,n){e&&(n?k(e).reverse():k(e)).forEach((function(n){"__proto__"!==n&&t(e[n],n)}))}function U(e){return o(arguments,1).forEach((function(t){_(t,(function(n,o){e[o]=t[o]}))})),e}function T(e){return o(arguments,1).forEach((function(t){_(t,(function(t,n){d(t)?e[n]=t.slice():l(t)?e[n]=T({},l(e[n])?e[n]:{},t):e[n]=t}))})),e}function A(e,t){v(t||k(e),(function(t){delete e[t]}))}function j(e,t){v(e,(function(e){v(t,(function(t){e&&e.removeAttribute(t)}))}))}function P(e,t,n){l(t)?_(t,(function(t,n){P(e,n,t)})):v(e,(function(e){p(n)||""===n?j(e,t):e.setAttribute(t,String(n))}))}function I(e,t,n){return e=document.createElement(e),t&&(h(t)?S:P)(e,t),n&&b(n,e),e}function D(e,t,n){if(m(n))return getComputedStyle(e)[t];p(n)||(e.style[t]=""+n)}function G(e,t){D(e,"display",t)}function z(e){e.setActive&&e.setActive()||e.focus({preventScroll:!0})}function F(e,t){return e.getAttribute(t)}function M(e,t){return e&&e.classList.contains(t)}function O(e){return e.getBoundingClientRect()}function H(e){v(e,(function(e){e&&e.parentNode&&e.parentNode.removeChild(e)}))}function N(e){return C((new DOMParser).parseFromString(e,"text/html").body)}function X(e,t){e.preventDefault(),t&&(e.stopPropagation(),e.stopImmediatePropagation())}function R(e,t){return e&&e.querySelector(t)}function W(e,t){return t?o(e.querySelectorAll(t)):[]}function B(e,t){L(e,t,!1)}function Y(e){return e.timeStamp}function V(e){return h(e)?e:e?e+"px":""}var $="splide",Z="data-"+$;function Q(e,t){if(!e)throw new Error("["+$+"] "+(t||""))}var J=Math.min,K=Math.max,ee=Math.floor,te=Math.ceil,ne=Math.abs;function oe(e,t,n){return ne(e-t)<n}function re(e,t,n,o){var r=J(t,n);return t=K(t,n),o?r<e&&e<t:r<=e&&e<=t}function se(e,t,n){var o=J(t,n);return t=K(t,n),J(K(o,e),t)}function ie(e){return(0<e)-(e<0)}function ae(e,t){return v(t,(function(t){e=e.replace("%s",""+t)})),e}function ce(e){return e<10?"0"+e:""+e}var le={};function de(){var e=[];function n(e,t,n){v(e,(function(e){e&&v(t,(function(t){t.split(" ").forEach((function(t){t=t.split("."),n(e,t[0],t[1])}))}))}))}return{bind:function(t,o,r,s){n(t,o,(function(t,n,o){var i="addEventListener"in t,a=i?t.removeEventListener.bind(t,n,r,s):t.removeListener.bind(t,r);i?t.addEventListener(n,r,s):t.addListener(r),e.push([t,n,o,r,a])}))},unbind:function(t,o,r){n(t,o,(function(t,n,o){e=e.filter((function(e){return!!(e[0]!==t||e[1]!==n||e[2]!==o||r&&e[3]!==r)||(e[4](),!1)}))}))},dispatch:function(e,t,n){var o;return"function"==typeof CustomEvent?o=new CustomEvent(t,{bubbles:!0,detail:n}):(o=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!1,n),e.dispatchEvent(o),o},destroy:function(){e.forEach((function(e){e[4]()})),t(e)}}}var ue="mounted",he="move",me="moved",pe="click",fe="refresh",ge="updated",ve="resize",ye="resized",we="scroll",Le="scrolled",Se="destroy",be="navigation:mounted",Ee="autoplay:play",xe="autoplay:pause",qe="lazyload:loaded";function Ce(e){var t=e?e.event.bus:document.createDocumentFragment(),n=de();return e&&e.event.on(Se,n.destroy),U(n,{bus:t,on:function(e,o){n.bind(t,g(e).join(" "),(function(e){o.apply(o,d(e.detail)?e.detail:[])}))},off:r(n.unbind,t),emit:function(e){n.dispatch(t,e,o(arguments,1))}})}function ke(e,t,n,o){var r,s,i=Date.now,c=0,l=!0,d=0;function u(){if(!l){if(c=e?J((i()-r)/e,1):1,n&&n(c),1<=c&&(t(),r=i(),o&&++d>=o))return h();s=a(u)}}function h(){l=!0}function m(){s&&cancelAnimationFrame(s),l=!(s=c=0)}return{start:function(t){t||m(),r=i()-(t?c*e:0),l=!1,s=a(u)},rewind:function(){r=i(),c=0,n&&n(c)},pause:h,cancel:m,set:function(t){e=t},isPaused:function(){return l}}}var _e,Ue,Te=(_e="Arrow")+"Left",Ae=_e+"Right",je=_e+"Up",Pe="ttb",Ie={width:["height"],left:["top","right"],right:["bottom","left"],x:["y"],X:["Y"],Y:["X"],ArrowLeft:[je,Ae],ArrowRight:[_e+="Down",Te]},De="role",Ge="tabindex",ze=(Ue="aria-")+"controls",Fe=Ue+"current",Me=Ue+"selected",Oe=Ue+"label",He=Ue+"labelledby",Ne=Ue+"hidden",Xe=Ue+"orientation",Re=Ue+"roledescription",We=Ue+"live",Be=Ue+"busy",Ye=Ue+"atomic",Ve=[De,Ge,"disabled",ze,Fe,Oe,He,Ne,Xe,Re],$e=$,Ze=(Ue=$+"__")+"track",Qe=Ue+"list",Je=Ue+"slide",Ke=Je+"--clone",et=Je+"__container",tt=Ue+"arrows",nt=Ue+"arrow",ot=nt+"--prev",rt=nt+"--next",st=Ue+"pagination",it=st+"__page",at=Ue+"progress__bar",ct=Ue+"toggle",lt=Ue+"sr",dt="is-active",ut="is-prev",ht="is-next",mt="is-visible",pt="is-loading",ft="is-focus-in",gt="is-overflow",vt=[dt,mt,ut,ht,pt,ft,gt],yt="touchstart mousedown",wt="touchmove mousemove",Lt="touchend touchcancel mouseup click",St="slide",bt="loop",Et="fade",xt=Z+"-interval",qt={passive:!1,capture:!0},Ct={Spacebar:" ",Right:Ae,Left:Te,Up:je,Down:_e};function kt(e){return e=h(e)?e:e.key,Ct[e]||e}var _t="keydown",Ut=Z+"-lazy",Tt=Ut+"-srcset",At="["+Ut+"], ["+Tt+"]",jt=[" ","Enter"],Pt=Object.freeze({__proto__:null,Media:function(t,n,o){var r=t.state,s=o.breakpoints||{},i=o.reducedMotion||{},a=de(),c=[];function l(e){e&&a.destroy()}function d(e,t){t=matchMedia(t),a.bind(t,"change",u),c.push([e,t])}function u(){var e=r.is(7),n=o.direction,s=c.reduce((function(e,t){return T(e,t[1].matches?t[0]:{})}),{});A(o),h(s),o.destroy?t.destroy("completely"===o.destroy):e?(l(!0),t.mount()):n!==o.direction&&t.refresh()}function h(e,n,s){T(o,e),n&&T(Object.getPrototypeOf(o),e),!s&&r.is(1)||t.emit(ge,o)}return{setup:function(){var t="min"===o.mediaQuery;k(s).sort((function(e,n){return t?+e-+n:+n-+e})).forEach((function(e){d(s[e],"("+(t?"min":"max")+"-width:"+e+"px)")})),d(i,e),u()},destroy:l,reduce:function(t){matchMedia(e).matches&&(t?T(o,i):A(o,k(i)))},set:h}},Direction:function(e,t,n){return{resolve:function(e,t,o){var r="rtl"!==(o=o||n.direction)||t?o===Pe?0:-1:1;return Ie[e]&&Ie[e][r]||e.replace(/width|left|right/i,(function(e,t){return e=Ie[e.toLowerCase()][r]||e,0<t?e.charAt(0).toUpperCase()+e.slice(1):e}))},orient:function(e){return e*("rtl"===n.direction?1:-1)}}},Elements:function(e,n,o){var r,s,i,a=Ce(e),c=a.on,l=a.bind,d=e.root,h=o.i18n,m={},p=[],f=[],g=[];function v(){r=E("."+Ze),s=C(r,"."+Qe),Q(r&&s,"A track/list element is missing."),w(p,q(s,"."+Je+":not(."+Ke+")")),_({arrows:tt,pagination:st,prev:ot,next:rt,bar:at,toggle:ct},(function(e,t){m[t]=E("."+e)})),U(m,{root:d,track:r,list:s,slides:p});var e=d.id||function(e){return""+e+ce(le[e]=(le[e]||0)+1)}($),t=o.role;d.id=e,r.id=r.id||e+"-track",s.id=s.id||e+"-list",!F(d,De)&&"SECTION"!==d.tagName&&t&&P(d,De,t),P(d,Re,h.carousel),P(s,De,"presentation"),b()}function y(e){var n=Ve.concat("style");t(p),B(d,f),B(r,g),j([r,s],n),j(d,e?n:["style",Re])}function b(){B(d,f),B(r,g),f=k($e),g=k(Ze),S(d,f),S(r,g),P(d,Oe,o.label),P(d,He,o.labelledby)}function E(e){return(e=R(d,e))&&function(e,t){if(u(e.closest))return e.closest(t);for(var n=e;n&&1===n.nodeType&&!x(n,t);)n=n.parentElement;return n}(e,"."+$e)===d?e:void 0}function k(e){return[e+"--"+o.type,e+"--"+o.direction,o.drag&&e+"--draggable",o.isNavigation&&e+"--nav",e===$e&&dt]}return U(m,{setup:v,mount:function(){c(fe,y),c(fe,v),c(ge,b),l(document,yt+" keydown",(function(e){i="keydown"===e.type}),{capture:!0}),l(d,"focusin",(function(){L(d,ft,!!i)}))},destroy:y})},Slides:function(e,n,o){var s=Ce(e),i=s.on,a=s.emit,c=s.bind,l=(s=n.Elements).slides,d=s.list,m=[];function p(){l.forEach((function(e,t){q(e,t,-1)}))}function w(){_((function(e){e.destroy()})),t(m)}function q(t,n,o){n=function(e,t,n,o){var s,i=Ce(e),a=i.on,c=i.emit,l=i.bind,d=e.Components,u=e.root,h=e.options,m=h.isNavigation,p=h.updateOnMove,f=h.i18n,g=h.pagination,v=h.slideFocus,y=d.Direction.resolve,w=F(o,"style"),S=F(o,Oe),b=-1<n,E=C(o,"."+et);function x(){var r=e.splides.map((function(e){return(e=e.splide.Components.Slides.getAt(t))?e.slide.id:""})).join(" ");P(o,Oe,ae(f.slideX,(b?n:t)+1)),P(o,ze,r),P(o,De,v?"button":""),v&&j(o,Re)}function q(){s||k()}function k(){var n,r,i;s||(n=e.index,(i=_())!==M(o,dt)&&(L(o,dt,i),P(o,Fe,m&&i||""),c(i?"active":"inactive",U)),i=function(){if(e.is(Et))return _();var t=O(d.Elements.track),n=O(o),r=y("left",!0),s=y("right",!0);return ee(t[r])<=te(n[r])&&ee(n[s])<=te(t[s])}(),r=!i&&(!_()||b),e.state.is([4,5])||P(o,Ne,r||""),P(W(o,h.focusableNodes||""),Ge,r?-1:""),v&&P(o,Ge,r?-1:0),i!==M(o,mt)&&(L(o,mt,i),c(i?"visible":"hidden",U)),i||document.activeElement!==o||(r=d.Slides.getAt(e.index))&&z(r.slide),L(o,ut,t===n-1),L(o,ht,t===n+1))}function _(){var o=e.index;return o===t||h.cloneStatus&&o===n}var U={index:t,slideIndex:n,slide:o,container:E,isClone:b,mount:function(){b||(o.id=u.id+"-slide"+ce(t+1),P(o,De,g?"tabpanel":"group"),P(o,Re,f.slide),P(o,Oe,S||ae(f.slideLabel,[t+1,e.length]))),l(o,"click",r(c,pe,U)),l(o,"keydown",r(c,"sk",U)),a([me,"sh",Le],k),a(be,x),p&&a(he,q)},destroy:function(){s=!0,i.destroy(),B(o,vt),j(o,Ve),P(o,"style",w),P(o,Oe,S||"")},update:k,style:function(e,t,n){D(n&&E||o,e,t)},isWithin:function(n,o){return n=ne(n-t),(n=b||!h.rewind&&!e.is(bt)?n:J(n,e.length-n))<=o}};return U}(e,n,o,t),n.mount(),m.push(n),m.sort((function(e,t){return e.index-t.index}))}function k(e){return e?U((function(e){return!e.isClone})):m}function _(e,t){k(t).forEach(e)}function U(e){return m.filter(u(e)?e:function(t){return h(e)?x(t.slide,e):y(g(e),t.index)})}return{mount:function(){p(),i(fe,w),i(fe,p)},destroy:w,update:function(){_((function(e){e.update()}))},register:q,get:k,getIn:function(e){var t=n.Controller,r=t.toIndex(e),s=t.hasFocus()?1:o.perPage;return U((function(e){return re(e.index,r,r+s-1)}))},getAt:function(e){return U(e)[0]},add:function(e,t){v(e,(function(e){var n,s,i;f(e=h(e)?N(e):e)&&((n=l[t])?E(e,n):b(d,e),S(e,o.classes.slide),n=e,s=r(a,ve),n=W(n,"img"),(i=n.length)?n.forEach((function(e){c(e,"load error",(function(){--i||s()}))})):s())})),a(fe)},remove:function(e){H(U(e).map((function(e){return e.slide}))),a(fe)},forEach:_,filter:U,style:function(e,t,n){_((function(o){o.style(e,t,n)}))},getLength:function(e){return(e?l:m).length},isEnough:function(){return m.length>o.perPage}}},Layout:function(e,t,n){var o,s,i,a=(u=Ce(e)).on,c=u.bind,d=u.emit,u=t.Slides,h=t.Direction.resolve,m=(t=t.Elements).root,p=t.track,f=t.list,g=u.getAt,v=u.style;function y(){o=n.direction===Pe,D(m,"maxWidth",V(n.width)),D(p,h("paddingLeft"),S(!1)),D(p,h("paddingRight"),S(!0)),w(!0)}function w(e){var t=O(m);!e&&s.width===t.width&&s.height===t.height||(D(p,"height",function(){var e="";return o&&(Q(e=b(),"height or heightRatio is missing."),e="calc("+e+" - "+S(!1)+" - "+S(!0)+")"),e}()),v(h("marginRight"),V(n.gap)),v("width",n.autoWidth?null:V(n.fixedWidth)||(o?"":E())),v("height",V(n.fixedHeight)||(o?n.autoHeight?null:E():b()),!0),s=t,d(ye),i!==(i=U())&&(L(m,gt,i),d("overflow",i)))}function S(e){var t=n.padding;return e=h(e?"right":"left"),t&&V(t[e]||(l(t)?0:t))||"0px"}function b(){return V(n.height||O(f).width*n.heightRatio)}function E(){var e=V(n.gap);return"calc((100%"+(e&&" + "+e)+")/"+(n.perPage||1)+(e&&" - "+e)+")"}function x(){return O(f)[h("width")]}function q(e,t){return(e=g(e||0))?O(e.slide)[h("width")]+(t?0:_()):0}function C(e,t){var n;return(e=g(e))?(e=O(e.slide)[h("right")],n=O(f)[h("left")],ne(e-n)+(t?0:_())):0}function k(t){return C(e.length-1)-C(0)+q(0,t)}function _(){var e=g(0);return e&&parseFloat(D(e.slide,h("marginRight")))||0}function U(){return e.is(Et)||k(!0)>x()}return{mount:function(){var e,t;y(),c(window,"resize load",(e=r(d,ve),t=ke(0,e,null,1),function(){t.isPaused()&&t.start()})),a([ge,fe],y),a(ve,w)},resize:w,listSize:x,slideSize:q,sliderSize:k,totalSize:C,getPadding:function(e){return parseFloat(D(p,h("padding"+(e?"Right":"Left"))))||0},isOverflow:U}},Clones:function(e,n,o){var r,s=Ce(e),i=s.on,a=n.Elements,c=n.Slides,l=n.Direction.resolve,d=[];function u(){if(i(fe,h),i([ge,ve],f),r=g()){var t=r,s=c.get().slice(),l=s.length;if(l){for(;s.length<t;)w(s,s);w(s.slice(-t),s.slice(0,t)).forEach((function(n,r){var i=r<t,u=function(t,n){return S(t=t.cloneNode(!0),o.classes.clone),t.id=e.root.id+"-clone"+ce(n+1),t}(n.slide,r);i?E(u,s[0].slide):b(a.list,u),w(d,u),c.register(u,r-t+(i?0:l),n.index)}))}n.Layout.resize(!0)}}function h(){p(),u()}function p(){H(d),t(d),s.destroy()}function f(){var e=g();r!==e&&(r<e||!e)&&s.emit(fe)}function g(){var t,r=o.clones;return e.is(bt)?m(r)&&(r=(t=o[l("fixedWidth")]&&n.Layout.slideSize(0))&&te(O(a.track)[l("width")]/t)||o[l("autoWidth")]&&e.length||2*o.perPage):r=0,r}return{mount:u,destroy:p}},Move:function(e,t,n){var o,r=Ce(e),s=r.on,i=r.emit,a=e.state.set,c=(r=t.Layout).slideSize,l=r.getPadding,d=r.totalSize,u=r.listSize,h=r.sliderSize,p=(r=t.Direction).resolve,f=r.orient,g=(r=t.Elements).list,v=r.track;function y(){t.Controller.isBusy()||(t.Scroll.cancel(),w(e.index),t.Slides.update())}function w(e){L(x(e,!0))}function L(n,o){e.is(Et)||(o=o?n:function(n){var o,r;return e.is(bt)&&(r=(o=E(n))>t.Controller.getEnd(),(o<0||r)&&(n=S(n,r))),n}(n),D(g,"transform","translate"+p("X")+"("+o+"px)"),n!==o&&i("sh"))}function S(e,t){var n=e-C(t),o=h();return e-f(o*(te(ne(n)/o)||1))*(t?1:-1)}function b(){L(q(),!0),o.cancel()}function E(e){for(var n=t.Slides.get(),o=0,r=1/0,s=0;s<n.length;s++){var i=n[s].index,a=ne(x(i,!0)-e);if(!(a<=r))break;r=a,o=i}return o}function x(t,o){var r=f(d(t-1)-("center"===(r=n.focus)?(u()-c(t,!0))/2:+r*c(t)||0));return o?(t=r,t=n.trimSpace&&e.is(St)?se(t,0,f(h(!0)-u())):t):r}function q(){var e=p("left");return O(g)[e]-O(v)[e]+f(l(!1))}function C(e){return x(e?t.Controller.getEnd():0,!!n.trimSpace)}return{mount:function(){o=t.Transition,s([ue,ye,ge,fe],y)},move:function(e,t,n,r){var s,c;e!==t&&(s=n<e,c=f(S(q(),s)),s?0<=c:c<=g[p("scrollWidth")]-O(v)[p("width")])&&(b(),L(S(q(),n<e),!0)),a(4),i(he,t,n,e),o.start(t,(function(){a(3),i(me,t,n,e),r&&r()}))},jump:w,translate:L,shift:S,cancel:b,toIndex:E,toPosition:x,getPosition:q,getLimit:C,exceededLimit:function(e,t){t=m(t)?q():t;var n=!0!==e&&f(t)<f(C(!1));return e=!1!==e&&f(t)>f(C(!0)),n||e},reposition:y}},Controller:function(e,t,n){var o,s,i,a,c=Ce(e),l=c.on,d=c.emit,u=t.Move,p=u.getPosition,f=u.getLimit,g=u.toPosition,v=(c=t.Slides).isEnough,y=c.getLength,w=n.omitEnd,L=e.is(bt),S=e.is(St),b=r(_,!1),E=r(_,!0),x=n.start||0,q=x;function C(){s=y(!0),i=n.perMove,a=n.perPage,o=A();var e=se(x,0,w?o:s-1);e!==x&&(x=e,u.reposition())}function k(){o!==A()&&d("ei")}function _(e,t){var n=i||(D()?1:a);return-1===(n=U(x+n*(e?-1:1),x,!(i||D())))&&S&&!oe(p(),f(!e),1)?e?0:o:t?n:T(n)}function U(t,r,c){var l;return v()||D()?((l=function(t){if(S&&"move"===n.trimSpace&&t!==x)for(var o=p();o===g(t,!0)&&re(t,0,e.length-1,!n.rewind);)t<x?--t:++t;return t}(t))!==t&&(r=t,t=l,c=!1),t<0||o<t?t=i||!re(0,t,r,!0)&&!re(o,r,t,!0)?L?c?t<0?-(s%a||a):s:t:n.rewind?t<0?o:0:-1:j(P(t)):c&&t!==r&&(t=j(P(r)+(t<r?-1:1)))):t=-1,t}function T(e){return L?(e+s)%s||0:e}function A(){for(var e=s-(D()||L&&i?1:a);w&&0<e--;)if(g(s-1,!0)!==g(e,!0)){e++;break}return se(e,0,s-1)}function j(e){return se(D()?e:a*e,0,o)}function P(e){return D()?J(e,o):ee((o<=e?s-1:e)/a)}function I(e){e!==x&&(q=x,x=e)}function D(){return!m(n.focus)||n.isNavigation}function G(){return e.state.is([4,5])&&!!n.waitForTransition}return{mount:function(){C(),l([ge,fe,"ei"],C),l(ye,k)},go:function(e,t,n){var r;G()||-1<(r=T(e=function(e){var t,n,r=x;return h(e)?(t=(n=e.match(/([+\-<>])(\d+)?/)||[])[1],n=n[2],"+"===t||"-"===t?r=U(x+ +(""+t+(+n||1)),x):">"===t?r=n?j(+n):b(!0):"<"===t&&(r=E(!0))):r=L?e:se(e,0,o),r}(e)))&&(t||r!==x)&&(I(r),u.move(e,r,q,n))},scroll:function(e,n,r,s){t.Scroll.scroll(e,n,r,(function(){var e=T(u.toIndex(p()));I(w?J(e,o):e),s&&s()}))},getNext:b,getPrev:E,getAdjacent:_,getEnd:A,setIndex:I,getIndex:function(e){return e?q:x},toIndex:j,toPage:P,toDest:function(e){return e=u.toIndex(e),S?se(e,0,o):e},hasFocus:D,isBusy:G}},Arrows:function(e,t,n){var o,s,i=Ce(e),a=i.on,c=i.bind,l=i.emit,d=n.classes,u=n.i18n,h=t.Elements,m=t.Controller,p=h.arrows,f=h.track,g=p,v=h.prev,y=h.next,w={};function L(){var e=n.arrows;!e||v&&y||(g=p||I("div",d.arrows),v=k(!0),y=k(!1),o=!0,b(g,[v,y]),p||E(g,f)),v&&y&&(U(w,{prev:v,next:y}),G(g,e?"":"none"),S(g,s=tt+"--"+n.direction),e&&(a([ue,me,fe,Le,"ei"],_),c(y,"click",r(C,">")),c(v,"click",r(C,"<")),_(),P([v,y],ze,f.id),l("arrows:mounted",v,y))),a(ge,x)}function x(){q(),L()}function q(){i.destroy(),B(g,s),o?(H(p?[v,y]:g),v=y=null):j([v,y],Ve)}function C(e){m.go(e,!0)}function k(e){return N('<button class="'+d.arrow+" "+(e?d.prev:d.next)+'" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40 40" width="40" height="40" focusable="false"><path d="'+(n.arrowPath||"m15.5 0.932-4.3 4.38 14.5 14.6-14.5 14.5 4.3 4.4 14.6-14.6 4.4-4.3-4.4-4.4-14.6-14.6z")+'" />')}function _(){var t,n,o,r;v&&y&&(r=e.index,t=m.getPrev(),n=m.getNext(),o=-1<t&&r<t?u.last:u.prev,r=-1<n&&n<r?u.first:u.next,v.disabled=t<0,y.disabled=n<0,P(v,Oe,o),P(y,Oe,r),l("arrows:updated",v,y,t,n))}return{arrows:w,mount:L,destroy:q,update:_}},Autoplay:function(e,t,n){var o,r,s=Ce(e),i=s.on,a=s.bind,c=s.emit,l=ke(n.interval,e.go.bind(e,">"),(function(e){var t=u.bar;t&&D(t,"width",100*e+"%"),c("autoplay:playing",e)})),d=l.isPaused,u=t.Elements,h=(s=t.Elements).root,m=s.toggle,p=n.autoplay,f="pause"===p;function g(){d()&&t.Slides.isEnough()&&(l.start(!n.resetProgress),r=o=f=!1,w(),c(Ee))}function v(e){f=!!(e=void 0===e||e),w(),d()||(l.pause(),c(xe))}function y(){f||(o||r?v(!1):g())}function w(){m&&(L(m,dt,!f),P(m,Oe,n.i18n[f?"play":"pause"]))}function S(e){e=t.Slides.getAt(e),l.set(e&&+F(e.slide,xt)||n.interval)}return{mount:function(){p&&(n.pauseOnHover&&a(h,"mouseenter mouseleave",(function(e){o="mouseenter"===e.type,y()})),n.pauseOnFocus&&a(h,"focusin focusout",(function(e){r="focusin"===e.type,y()})),m&&a(m,"click",(function(){f?g():v(!0)})),i([he,we,fe],l.rewind),i(he,S),m&&P(m,ze,u.track.id),f||g(),w())},destroy:l.cancel,play:g,pause:v,isPaused:d}},Cover:function(e,t,n){var o=Ce(e).on;function s(e){t.Slides.forEach((function(t){var n=C(t.container||t.slide,"img");n&&n.src&&i(e,n,t)}))}function i(e,t,n){n.style("background",e?'center/cover no-repeat url("'+t.src+'")':"",!0),G(t,e?"none":"")}return{mount:function(){n.cover&&(o(qe,r(i,!0)),o([ue,ge,fe],r(s,!0)))},destroy:r(s,!1)}},Scroll:function(e,t,n){var o,s,i=Ce(e),a=i.on,c=i.emit,l=e.state.set,d=t.Move,u=d.getPosition,h=d.getLimit,m=d.exceededLimit,p=d.translate,f=e.is(St),g=1;function v(e,n,i,a,h){var p,v=u();L(),!i||f&&m()||(i=t.Layout.sliderSize(),p=ie(e)*i*ee(ne(e)/i)||0,e=d.toPosition(t.Controller.toDest(e%i))+p),i=oe(v,e,1),g=1,n=i?0:n||K(ne(e-v)/1.5,800),s=a,o=ke(n,y,r(w,v,e,h),1),l(5),c(we),o.start()}function y(){l(3),s&&s(),c(Le)}function w(e,t,o,r){var i=u();r=(e+(t-e)*(t=r,(e=n.easingFunc)?e(t):1-Math.pow(1-t,4))-i)*g,p(i+r),f&&!o&&m()&&(g*=.6,ne(r)<10&&v(h(m(!0)),600,!1,s,!0))}function L(){o&&o.cancel()}function S(){o&&!o.isPaused()&&(L(),y())}return{mount:function(){a(he,L),a([ge,fe],S)},destroy:L,scroll:v,cancel:S}},Drag:function(e,t,n){var o,r,i,a,c,d,u,h,m=Ce(e),p=m.on,f=m.emit,g=m.bind,v=m.unbind,y=e.state,w=t.Move,L=t.Scroll,S=t.Controller,b=t.Elements.track,E=t.Media.reduce,q=(m=t.Direction).resolve,C=m.orient,k=w.getPosition,_=w.exceededLimit,U=!1;function T(){var e=n.drag;H(!e),a="free"===e}function A(e){var t,o,r;d=!1,u||(t=O(e),o=e.target,r=n.noDrag,x(o,"."+it+", ."+nt)||r&&x(o,r)||!t&&e.button||(S.isBusy()?X(e,!0):(h=t?b:window,c=y.is([4,5]),i=null,g(h,wt,j,qt),g(h,Lt,P,qt),w.cancel(),L.cancel(),D(e))))}function j(t){var r,s,i,a,u;y.is(6)||(y.set(6),f("drag")),t.cancelable&&(c?(w.translate(o+G(t)/(U&&e.is(St)?5:1)),u=200<z(t),r=U!==(U=_()),(u||r)&&D(t),d=!0,f("dragging"),X(t)):ne(G(u=t))>ne(G(u,!0))&&(r=t,a=(i=l(s=n.dragMinThreshold))&&s.mouse||0,i=(i?s.touch:+s)||10,c=ne(G(r))>(O(r)?i:a),X(t)))}function P(o){var r,s,i;y.is(6)&&(y.set(3),f("dragged")),c&&(s=function(e){return k()+ie(e)*J(ne(e)*(n.flickPower||600),a?1/0:t.Layout.listSize()*(n.flickMaxPages||1))}(r=function(t){if(e.is(bt)||!U){var n=z(t);if(n&&n<200)return G(t)/n}return 0}(r=o)),i=n.rewind&&n.rewindByDrag,E(!1),a?S.scroll(s,0,n.snap):e.is(Et)?S.go(C(ie(r))<0?i?"<":"-":i?">":"+"):e.is(St)&&U&&i?S.go(_(!0)?">":"<"):S.go(S.toDest(s),!0),E(!0),X(o)),v(h,wt,j),v(h,Lt,P),c=!1}function I(e){!u&&d&&X(e,!0)}function D(e){i=r,r=e,o=k()}function G(e,t){return M(e,t)-M(F(e),t)}function z(e){return Y(e)-Y(F(e))}function F(e){return r===e&&i||r}function M(e,t){return(O(e)?e.changedTouches[0]:e)["page"+q(t?"Y":"X")]}function O(e){return"undefined"!=typeof TouchEvent&&e instanceof TouchEvent}function H(e){u=e}return{mount:function(){g(b,wt,s,qt),g(b,Lt,s,qt),g(b,yt,A,qt),g(b,"click",I,{capture:!0}),g(b,"dragstart",X),p([ue,ge],T)},disable:H,isDragging:function(){return c}}},Keyboard:function(e,t,n){var o,r,s=Ce(e),a=s.on,c=s.bind,l=s.unbind,d=e.root,u=t.Direction.resolve;function h(){var e=n.keyboard;e&&(o="global"===e?window:d,c(o,_t,f))}function m(){l(o,_t)}function p(){var e=r;r=!0,i((function(){r=e}))}function f(t){r||((t=kt(t))===u(Te)?e.go("<"):t===u(Ae)&&e.go(">"))}return{mount:function(){h(),a(ge,m),a(ge,h),a(he,p)},destroy:m,disable:function(e){r=e}}},LazyLoad:function(e,n,o){var s=Ce(e),i=s.on,a=s.off,c=s.bind,l=s.emit,d="sequential"===o.lazyLoad,u=[me,Le],h=[];function m(){t(h),n.Slides.forEach((function(e){W(e.slide,At).forEach((function(t){var n=F(t,Ut),r=F(t,Tt);n===t.src&&r===t.srcset||(n=o.classes.spinner,n=C(r=t.parentElement,"."+n)||I("span",n,r),h.push([t,e,n]),t.src||G(t,"none"))}))})),(d?v:(a(u),i(u,p),p))()}function p(){(h=h.filter((function(t){var n=o.perPage*((o.preloadPages||1)+1)-1;return!t[1].isWithin(e.index,n)||f(t)}))).length||a(u)}function f(e){var t=e[0];S(e[1].slide,pt),c(t,"load error",r(g,e)),P(t,"src",F(t,Ut)),P(t,"srcset",F(t,Tt)),j(t,Ut),j(t,Tt)}function g(e,t){var n=e[0],o=e[1];B(o.slide,pt),"error"!==t.type&&(H(e[2]),G(n,""),l(qe,n,o),l(ve)),d&&v()}function v(){h.length&&f(h.shift())}return{mount:function(){o.lazyLoad&&(m(),i(fe,m))},destroy:r(t,h),check:p}},Pagination:function(e,n,s){var i,a,c=Ce(e),l=c.on,d=c.emit,u=c.bind,h=n.Slides,m=n.Elements,p=n.Controller,f=p.hasFocus,g=p.getIndex,v=p.go,y=n.Direction.resolve,w=m.pagination,L=[];function b(){i&&(H(w?o(i.children):i),B(i,a),t(L),i=null),c.destroy()}function E(e){v(">"+e,!0)}function x(e,t){var n=L.length,o=kt(t),r=q(),s=-1;o===y(Ae,!1,r)?s=++e%n:o===y(Te,!1,r)?s=(--e+n)%n:"Home"===o?s=0:"End"===o&&(s=n-1),(r=L[s])&&(z(r.button),v(">"+s),X(t,!0))}function q(){return s.paginationDirection||s.direction}function C(e){return L[p.toPage(e)]}function k(){var e,t=C(g(!0)),n=C(g());t&&(B(e=t.button,dt),j(e,Me),P(e,Ge,-1)),n&&(S(e=n.button,dt),P(e,Me,!0),P(e,Ge,"")),d("pagination:updated",{list:i,items:L},t,n)}return{items:L,mount:function t(){b(),l([ge,fe,"ei"],t);var n=s.pagination;if(w&&G(w,n?"":"none"),n){l([he,we,Le],k),n=e.length;var o=s.classes,c=s.i18n,g=s.perPage,v=f()?p.getEnd()+1:te(n/g);S(i=w||I("ul",o.pagination,m.track.parentElement),a=st+"--"+q()),P(i,De,"tablist"),P(i,Oe,c.select),P(i,Xe,q()===Pe?"vertical":"");for(var y=0;y<v;y++){var _=I("li",null,i),U=I("button",{class:o.page,type:"button"},_),T=h.getIn(y).map((function(e){return e.slide.id})),A=!f()&&1<g?c.pageX:c.slideX;u(U,"click",r(E,y)),s.paginationKeyboard&&u(U,"keydown",r(x,y)),P(_,De,"presentation"),P(U,De,"tab"),P(U,ze,T.join(" ")),P(U,Oe,ae(A,y+1)),P(U,Ge,-1),L.push({li:_,button:U,page:y})}k(),d("pagination:mounted",{list:i,items:L},C(e.index))}},destroy:b,getAt:C,update:k}},Sync:function(e,n,o){var s=o.isNavigation,i=o.slideFocus,a=[];function c(){var t,n;e.splides.forEach((function(t){t.isParent||(d(e,t.splide),d(t.splide,e))})),s&&((n=(t=Ce(e)).on)(pe,h),n("sk",p),n([ue,ge],u),a.push(t),t.emit(be,e.splides))}function l(){a.forEach((function(e){e.destroy()})),t(a)}function d(e,t){(e=Ce(e)).on(he,(function(e,n,o){t.go(t.is(bt)?o:e)})),a.push(e)}function u(){P(n.Elements.list,Xe,o.direction===Pe?"vertical":"")}function h(t){e.go(t.index)}function p(e,t){y(jt,kt(t))&&(h(e),X(t))}return{setup:r(n.Media.set,{slideFocus:m(i)?s:i},!0),mount:c,destroy:l,remount:function(){l(),c()}}},Wheel:function(e,t,n){var o=Ce(e).bind,r=0;function s(o){var s,i,a,c,l;o.cancelable&&(s=(l=o.deltaY)<0,i=Y(o),a=n.wheelMinThreshold||0,c=n.wheelSleep||0,ne(l)>a&&c<i-r&&(e.go(s?"<":">"),r=i),l=s,n.releaseWheel&&!e.state.is(4)&&-1===t.Controller.getAdjacent(l)||X(o))}return{mount:function(){n.wheel&&o(t.Elements.track,"wheel",s,qt)}}},Live:function(e,t,n){var o=Ce(e).on,s=t.Elements.track,i=n.live&&!n.isNavigation,a=I("span",lt),c=ke(90,r(l,!1));function l(e){P(s,Be,e),e?(b(s,a),c.start()):(H(a),c.cancel())}function d(e){i&&P(s,We,e?"off":"polite")}return{mount:function(){i&&(d(!t.Autoplay.isPaused()),P(s,Ye,!0),a.textContent="â€¦",o(Ee,r(d,!0)),o(xe,r(d,!1)),o([me,Le],r(l,!0)))},disable:d,destroy:function(){j(s,[We,Ye,Be]),H(a)}}}}),It={type:"slide",role:"region",speed:400,perPage:1,cloneStatus:!0,arrows:!0,pagination:!0,paginationKeyboard:!0,interval:5e3,pauseOnHover:!0,pauseOnFocus:!0,resetProgress:!0,easing:"cubic-bezier(0.25, 1, 0.5, 1)",drag:!0,direction:"ltr",trimSpace:!0,focusableNodes:"a, button, textarea, input, select, iframe",live:!0,classes:{slide:Je,clone:Ke,arrows:tt,arrow:nt,prev:ot,next:rt,pagination:st,page:it,spinner:Ue+"spinner"},i18n:{prev:"Previous slide",next:"Next slide",first:"Go to first slide",last:"Go to last slide",slideX:"Go to slide %s",pageX:"Go to page %s",play:"Start autoplay",pause:"Pause autoplay",carousel:"carousel",slide:"slide",select:"Select a slide to show",slideLabel:"%s of %s"},reducedMotion:{speed:0,rewindSpeed:0,autoplay:"pause"}};function Dt(e,t,n){var o=t.Slides;function r(){o.forEach((function(e){e.style("transform","translateX(-"+100*e.index+"%)")}))}return{mount:function(){Ce(e).on([ue,fe],r)},start:function(e,t){o.style("transition","opacity "+n.speed+"ms "+n.easing),i(t)},cancel:s}}function Gt(e,t,n){var o,s=t.Move,i=t.Controller,a=t.Scroll,c=t.Elements.list,l=r(D,c,"transition");function d(){l(""),a.cancel()}return{mount:function(){Ce(e).bind(c,"transitionend",(function(e){e.target===c&&o&&(d(),o())}))},start:function(t,r){var c=s.toPosition(t,!0),d=s.getPosition(),u=function(t){var o=n.rewindSpeed;if(e.is(St)&&o){var r=i.getIndex(!0),s=i.getEnd();if(0===r&&s<=t||s<=r&&0===t)return o}return n.speed}(t);1<=ne(c-d)&&1<=u?n.useScroll?a.scroll(c,u,!1,r):(l("transform "+u+"ms "+n.easing),s.translate(c,!0),o=r):(s.jump(t),r())},cancel:d}}return je=function(){function e(t,n){this.event=Ce(),this.Components={},this.state=function(e){var t=1;return{set:function(e){t=e},is:function(e){return y(g(e),t)}}}(),this.splides=[],this.n={},this.t={},Q(t=h(t)?R(document,t):t,t+" is invalid."),n=T({label:F(this.root=t,Oe)||"",labelledby:F(t,He)||""},It,e.defaults,n||{});try{T(n,JSON.parse(F(t,Z)))}catch(t){Q(!1,"Invalid JSON")}this.n=Object.create(T({},n))}var r=e.prototype;return r.mount=function(e,t){var n=this,o=this.state,r=this.Components;return Q(o.is([1,7]),"Already mounted!"),o.set(1),this.i=r,this.r=t||this.r||(this.is(Et)?Dt:Gt),this.t=e||this.t,_(U({},Pt,this.t,{Transition:this.r}),(function(e,t){e=e(n,r,n.n),(r[t]=e).setup&&e.setup()})),_(r,(function(e){e.mount&&e.mount()})),this.emit(ue),S(this.root,"is-initialized"),o.set(3),this.emit("ready"),this},r.sync=function(e){return this.splides.push({splide:e}),e.splides.push({splide:this,isParent:!0}),this.state.is(3)&&(this.i.Sync.remount(),e.Components.Sync.remount()),this},r.go=function(e){return this.i.Controller.go(e),this},r.on=function(e,t){return this.event.on(e,t),this},r.off=function(e){return this.event.off(e),this},r.emit=function(e){var t;return(t=this.event).emit.apply(t,[e].concat(o(arguments,1))),this},r.add=function(e,t){return this.i.Slides.add(e,t),this},r.remove=function(e){return this.i.Slides.remove(e),this},r.is=function(e){return this.n.type===e},r.refresh=function(){return this.emit(fe),this},r.destroy=function(e){void 0===e&&(e=!0);var n=this.event,o=this.state;return o.is(1)?Ce(this).on("ready",this.destroy.bind(this,e)):(_(this.i,(function(t){t.destroy&&t.destroy(e)}),!0),n.emit(Se),n.destroy(),e&&t(this.splides),o.set(7)),this},n(e,[{key:"options",get:function(){return this.n},set:function(e){this.i.Media.set(e,!0,!0)}},{key:"length",get:function(){return this.i.Slides.getLength(!0)}},{key:"index",get:function(){return this.i.Controller.getIndex()}}]),e}(),je.defaults={},je.STATES={CREATED:1,MOUNTED:2,IDLE:3,MOVING:4,SCROLLING:5,DRAGGING:6,DESTROYED:7},je},e.exports=o()}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var s=t[o]={exports:{}};return e[o].call(s.exports,s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};n.r(e),n.d(e,{atPos:()=>L,center:()=>q,lowerLeft:()=>E,lowerRight:()=>S,upperLeft:()=>x,upperRight:()=>b});var t={};n.r(t),n.d(t,{atPos:()=>C,center:()=>A,lowerLeft:()=>_,lowerRight:()=>k,upperLeft:()=>T,upperRight:()=>U});const o=async e=>{const t=new Headers;t.append("accept","application/json"),t.append("Content-Type","application/json");const n={method:"GET",headers:t,redirect:"follow"};let o=themeUrl.apiUrl;return fetch(o+"agent-scheduler/v1/task/"+e+"/results?zip=false",n).then((e=>e.json())).then((e=>e.data[0].image)).catch((e=>console.error("error",e)))},r=()=>{const e=document.querySelectorAll(".modals"),t=document.querySelectorAll(".open-modal"),n=document.querySelectorAll(".close-modal"),r=document.querySelector("html"),s=document.querySelector(".saved-notify"),i=(document.querySelector("#positive-prompt-2"),document.querySelector(".mobile-menu")),a=document.querySelectorAll('input[name="checkpoint"]'),c=document.querySelector("#current-model"),l=document.querySelectorAll('input[name="action"]'),d=document.querySelector("#current-scene"),u=document.querySelectorAll('input[name="char"]'),h=document.querySelector("#current-char"),m=document.querySelectorAll('input[name="face"]'),p=document.querySelector("#current-face");let f="";function g(){e.forEach((e=>{e.classList.remove("show"),r.classList.remove("modal-is-open"),setTimeout((function(){s.classList.remove("show")}),1e3)}))}t.forEach((t=>{t.addEventListener("click",(async n=>{n.preventDefault(),i.classList.remove("show"),f=t.dataset.id,"user-faces"===f&&(await(async()=>{const e=document.querySelectorAll(".single-face"),t=document.querySelectorAll(".face-image");0!==e.length&&e.forEach((e=>{const n=e.querySelector('input[name="face"]').id,r=e.querySelector("input"),s=e.querySelector(".loader");console.log(n),o(n).then((e=>{t.forEach((t=>{r.dataset.imgid==t.alt&&(s.classList.add("hide"),t.src=e)}))}))}))})(),await(async()=>{console.log("deleteFace works");const e=document.querySelectorAll(".delete-face");e&&e.forEach((e=>{e.addEventListener("click",(async()=>{const t=new FormData;return t.append("action","deleteFaceFromUser"),t.append("faceID",e.dataset.id),(async(e,t)=>{let n=await fetch(e,{method:"POST",credentials:"same-origin",body:t});return await n.json()})(themeUrl.ajax_url,t).then((t=>{document.querySelectorAll(".single-face").forEach((t=>{t.dataset.id===e.dataset.id&&t.remove()})),console.log(t)})).catch((e=>{console.log(e)}))}))}))})()),e.forEach((e=>{e.classList.contains(t.dataset.id)&&(e.classList.add("show"),r.classList.add("modal-is-open"))}))}))})),window.addEventListener("keyup",(function(e){27==e.keyCode&&g()})),n.forEach((e=>{e.addEventListener("click",g)})),window.addEventListener("click",(e=>{e.target.classList.contains("modals")&&g()})),a.forEach((e=>{e.addEventListener("change",(n=>{c.textContent=e.nextElementSibling.textContent,s.classList.add("show"),t.forEach((t=>{if(t.dataset.id===f){const n="Style: "+e.nextElementSibling.textContent;n.length<=26?t.textContent=n:t.textContent=n.substring(0,11)+"..."}})),g()}))})),l.forEach((e=>{e.addEventListener("change",(n=>{d.textContent=e.nextElementSibling.textContent,s.classList.add("show"),t.forEach((t=>{if(t.dataset.id===f){const n="Action: "+e.nextElementSibling.textContent;n.length<=26?t.textContent=n:t.textContent=n.substring(0,11)+"..."}})),g()}))})),u.forEach((e=>{e.addEventListener("change",(n=>{h.textContent=e.nextElementSibling.textContent,s.classList.add("show"),t.forEach((t=>{if(t.dataset.id===f){const n="Char: "+e.nextElementSibling.textContent;n.length<=26?"None"===e.nextElementSibling.textContent?t.textContent="Characters":t.textContent=n:t.textContent=n.substring(0,11)+"..."}})),g()}))})),m.forEach((e=>{e.addEventListener("change",(n=>{p.textContent=e.nextElementSibling.textContent,s.classList.add("show"),t.forEach((t=>{if(t.dataset.id===f){const n="Face: "+e.nextElementSibling.textContent;n.length<=26?"None"===e.nextElementSibling.textContent?t.textContent="Saved faces":t.textContent=n:t.textContent=n.substring(0,11)+"..."}})),g()}))}))},s=()=>{document.querySelectorAll('input[type="range"]').forEach((e=>{e.addEventListener("input",(t=>{e.nextElementSibling.textContent=e.value}))}))};s();const i=s,a=e=>{const t=new Headers;t.append("accept","application/json"),t.append("Content-Type","application/json");const n={method:"GET",headers:t,redirect:"follow",keepalive:!0};let o=themeUrl.apiUrl;return e||(o=themeUrl.apiUrlFree),fetch(o+"agent-scheduler/v1/queue",n).then((e=>e.json())).then((e=>({currentTaskId:e.current_task_id}))).catch((e=>console.error("error",e)))},c=(e,t)=>{const n=new Headers;n.append("accept","application/json"),n.append("Content-Type","application/json");const o={method:"GET",headers:n,redirect:"follow",keepalive:!0};let r=themeUrl.apiUrl;if(t||(r=themeUrl.apiUrlFree),""!==e)return fetch(r+"agent-scheduler/v1/task/"+e,o).then((e=>e.json())).then((e=>{if(e)return e.data.status})).catch((e=>console.error("error",e)))},l=(e,t)=>{const n=new Headers;n.append("accept","application/json"),n.append("Content-Type","application/json");const o={method:"GET",headers:n,redirect:"follow",keepalive:!0};let r=themeUrl.apiUrl;return t||(r=themeUrl.apiUrlFree),fetch(r+"agent-scheduler/v1/task/"+e,o).then((e=>e.json())).then((e=>(console.log(e),e.data.params.seed))).catch((e=>console.error("error",e)))},d=(e,t)=>{const n=new Headers;n.append("accept","application/json"),n.append("Content-Type","application/json");const o={method:"GET",headers:n,redirect:"follow"};let r=themeUrl.apiUrl;return t||(r=themeUrl.apiUrlFree),fetch(r+"agent-scheduler/v1/results/"+e,o).then((e=>e.json())).then((e=>{if(console.log(e),0==!e.success){let t=e.data[0].image,n=e.data[0].infotext;return t?{image:t,infotext:n}:"error, no image"}})).catch((e=>console.error("error",e)))};function u(e){return e}function h(e){return"string"==typeof e?p:e instanceof Image?u:f}function m(e,t){let n=[];for(var o=0;o<e.length;o++){const r=e[o],s=h(r)(r,t);n.push(s)}return Promise.all(n)}function p(e,t){const n=new Image;return"function"==typeof t&&t(n),new Promise((t=>{n.onload=()=>t(n),n.src=e}))}function f(e){const t=new FileReader;return new Promise((n=>{const o=new Image;t.onloadend=()=>function(e,t,n){e.onload=()=>n(e),e.src=t}(o,t.result,n),t.readAsDataURL(e)}))}function g(e,t){const n=new Image;return"function"==typeof t&&(n.onload=t),n.src=e,n}const v=/^data:([^;]+);base64,(.*)$/;function y(e){const t=e.length,n=new Uint8Array(t);for(let o=0;o<t;o++)n[o]=e.charCodeAt(o);return n}const w=function(...e){return function(t){return e.reduce(((e,t)=>t.call(null,e)),t)}}((function(e){return v.exec(e).slice(1)}),(e=>{return[(t=e[1],window.atob(t)),e[0]];var t}),(e=>new Blob([y(e[0])],{type:e[1]})));function L(e,t,n){return n||(n=1),function(o,r){const s=o.getContext("2d");return s.save(),s.globalAlpha=n,s.drawImage(r,e(o,r),t(o,r)),s.restore(),o}}function S(e){return L(((e,t)=>e.width-(t.width+10)),((e,t)=>e.height-(t.height+10)),e)}function b(e){return L(((e,t)=>e.width-(t.width+10)),((e,t)=>10),e)}function E(e){return L(((e,t)=>10),((e,t)=>e.height-(t.height+10)),e)}function x(e){return L(((e,t)=>10),((e,t)=>10),e)}function q(e){return L(((e,t)=>(e.width-t.width)/2),((e,t)=>(e.height-t.height)/2),e)}function C(e,t,n,o,r,s){return s||(s=1),function(i){const a=i.getContext("2d");a.save(),a.globalAlpha=s,a.fillStyle=r,a.font=o;let c=a.measureText(n);return a.fillText(n,e(i,c,a),t(i,c,a)),a.restore(),i}}function k(e,t,n,o,r){return C(((e,t)=>e.width-(t.width+10)),(e=>r||e.height-10),e,t,n,o)}function _(e,t,n,o,r){return C((()=>10),(e=>r||e.height-10),e,t,n,o)}function U(e,t,n,o,r){return C(((e,t)=>e.width-(t.width+10)),(()=>r||20),e,t,n,o)}function T(e,t,n,o,r){return C((()=>10),(()=>r||20),e,t,n,o)}function A(e,t,n,o,r){return C(((e,t,n)=>(n.textAlign="center",e.width/2)),((e,t,n)=>(n.textBaseline="middle",e.height/2)),e,t,n,o)}const j=e,P=t;function I(e,t){return Object.keys(t).forEach((n=>e[n]=t[n])),e}const D=function(){const e=[];return{pop(){return 0===this.length&&e.push(document.createElement("canvas")),e.pop()},get length(){return e.length},release(t){t.getContext("2d").clearRect(0,0,t.width,t.height),e.push(t)},clear(){e.splice(0,e.length)},get elements(){return e}}}(),G={init:()=>{},type:"image/png",encoderOptions:.92};function z(e,t={},n=null){const o=function(e){return I(I({},G),e)}(t);return n||(n=m(e,o.init)),{dataUrl(t){const n=this.then((e=>function(e,t){return e.map((e=>function(e,t){return function(e,t){const n=t.getContext("2d");return t.width=e.width,t.height=e.height,n.drawImage(e,0,0),t}(e,t.pop())}(e,t)))}(e,D))).then((e=>function(e,t){return{canvas:e.apply(null,t),sources:t}}(t,e))).then((e=>function(e,t,n){const{canvas:o,sources:r}=e,s=function(e,t={type:"image/png",encoderOptions:.92}){return e.toDataURL(t.type,t.encoderOptions)}(o,n);return r.forEach(t.release),s}(e,D,{type:o.type,encoderOptions:o.encoderOptions})));return z(e,o,n)},load(e,t){const n=this.then((n=>m([n].concat(e),t)));return z(e,o,n)},render(){const t=this.then((e=>m([e])));return z(e,o,t)},blob(t){const n=this.dataUrl(t).then(w);return z(e,o,n)},image(t){const n=this.dataUrl(t).then(g);return z(e,o,n)},then:(...e)=>n.then.apply(n,e)}}z.image=j,z.text=P,z.destroy=()=>D.clear();const F=async(e,t,n)=>{const o=document.querySelector(".col-wrapper"),r=(o.querySelector(".notifier"),o.querySelector(".spinner")),s=o.querySelector(".generated-image"),i=o.querySelectorAll(".generate"),a=o.querySelector(".col-wrapper .image");let c;t?(s.src=e,s.classList.add("show"),i.forEach((e=>{e.disabled=!1})),r.classList.remove("show")):await z([e,themeUrl.themeUrl+"/assets/images/watermark.jpg"]).image(((e,t)=>{const o=e.getContext("2d"),r=e.width,s=e.height,i=.4*r,a=i/t.width*t.height;let l,d;return c="9/16"==n?"512x768":"1/1"==n?"512x512":"768x512","512x512"===c?(l=r/10*.5,d=s/10*9):"512x768"===c?(l=r/9*1,d=s/16*15):(l=r/16*.5,d=s/9*5.75),o.save(),o.globalAlpha=.5,o.drawImage(t,l,d,i,a),o.restore(),e})).then((e=>{console.log(e),s.remove(),a.append(e),e.classList.add("show"),e.classList.add("generated-image"),i.forEach((e=>{e.disabled=!1})),r.classList.remove("show")}))},M=(e,t,n)=>{const o=new Date;o.setTime(o.getTime()+24*n*60*60*1e3);let r="expires="+o.toUTCString();document.cookie=e+"="+t+";"+r+";path=/"},O=(e,t)=>{const n=document.querySelector(".stop-generate"),o=document.querySelector(".generate"),r=document.querySelector(".gen-bottom"),s=document.querySelector(".col-wrapper"),i=s.querySelector(".spinner"),a=s.querySelector(".loader"),c=document.querySelector(".notifier"),l=document.querySelector("#steps-all"),d=document.querySelector("#premium-queue"),u=document.querySelector("#current-step"),h=document.querySelector(".seed-button"),m=document.querySelector(".saveface");if("start"===t)n.disabled=!1,o.classList.add("hidden"),r.classList.add("hidden"),n.classList.remove("hidden"),i.classList.add("show"),c.classList.add("hide"),l.classList.remove("hide"),d.classList.remove("hide"),d.textContent="Queue: calculating...",u.textContent="",h.classList.add("hidden"),document.querySelector(".generated-image")&&document.querySelector(".generated-image").classList.remove("show"),document.querySelector(".upscale")&&(document.querySelector(".upscale").classList.add("hidden"),document.querySelector(".upscale-text").classList.add("hidden")),m&&m.classList.add("hidden");else if("stopped"===t)n.disabled=!1,o.classList.remove("hidden"),r.classList.remove("hidden"),n.classList.add("hidden"),i.classList.remove("show"),c.classList.remove("hide"),h.classList.add("hidden"),d.textContent="";else if("end"===t){if(n.disabled=!1,i.classList.remove("show"),c.classList.add("hide"),e.classList.remove("hidden"),n.classList.add("hidden"),h.classList.remove("hidden"),M("lastGeneratedId","",1),document.querySelector(".upscale")){const e=document.querySelector(".upscale");e.classList.remove("hidden"),e.disabled=!1,e.textContent="Upscale & download!",document.querySelector(".upscale-text").classList.remove("hidden")}m&&m.classList.remove("hidden")}else"upscale"===t?(e.textContent="Upscaling, please wait...",i.classList.add("show"),c.classList.add("hide"),l.classList.add("hide"),d.classList.add("hide"),e.disabled=!0,u.textContent="Upscalling...",o.disabled=!0,r.disabled=!0):"end-upscale"===t?(e.textContent="Upscaled",i.classList.remove("show"),c.classList.add("hide"),l.classList.add("hide"),d.classList.add("hide"),h.classList.remove("hidden"),u.classList.add("hide"),e.disabled=!0,o.disabled=!1,r.disabled=!1):"error"===t?(a.classList.add("hide"),c.classList.add("show"),h.classList.add("hidden"),e.classList.remove("hidden"),n.classList.add("hidden"),l.classList.remove("hide"),n.disabled=!1):"already-generating"===t&&(o.classList.add("hidden"),r.classList.add("hidden"),n.classList.remove("hidden"),n.disabled=!0,i.classList.add("show"),c.classList.add("hide"),l.classList.remove("hide"),d.classList.remove("hide"),d.textContent="Your previous task is not done yet.",u.textContent="Your previous task is not done yet.",h.classList.add("hidden"),document.querySelector(".generated-image")&&document.querySelector(".generated-image").classList.remove("show"),document.querySelector(".upscale")&&(document.querySelector(".upscale").classList.add("hidden"),document.querySelector(".upscale-text").classList.add("hidden")),m&&m.classList.add("hidden"))},H=(e,t)=>{const n=new Headers;n.append("accept","application/json"),n.append("Content-Type","application/json");const o={method:"GET",headers:n,redirect:"follow",keepalive:!0};let r=themeUrl.apiUrl;if(t||(r=themeUrl.apiUrlFree),""!==e)return fetch(r+"agent-scheduler/v1/task/"+e+"/position",o).then((e=>e.json())).then((e=>(console.log(e),{pos:e.data.position,status:e.data.status}))).catch((e=>(O(document.querySelector(".generate"),"stopped"),e)))},N=(e,t)=>{const n=+e;document.querySelector("#premium-queue").textContent=""===t?"Queue: "+n:t},X=e=>{const t=document.querySelector("#steps-all");if("Error"===e)t.textContent=e;else if("premium"===e){const e=document.createElement("a");e.textContent="PREMIUM",e.href="/premium/",t.innerHTML="Get ",t.appendChild(e),t.innerHTML+=" to skip the queue."}else t.textContent=e+"%"},R=(e,t)=>{if(e){const e=new Headers;e.append("accept","application/json"),e.append("Content-Type","application/json");const n={method:"POST",headers:e,redirect:"follow",body:JSON.stringify({resize_mode:0,show_extras_results:!0,gfpgan_visibility:0,codeformer_visibility:0,codeformer_weight:0,upscaling_resize:3.5,upscaling_crop:!1,upscaler_1:"4xUltrasharp_4xUltrasharpV10",upscaler_2:"4xUltrasharp_4xUltrasharpV10",extras_upscaler_2_visibility:1,upscale_first:!0,image:t})};return fetch(themeUrl.apiUrl+"sdapi/v1/extra-single-image",n).then((e=>e.json())).then((e=>{let t="";const n=e.image;t=function(e){let t="";t="data:image/png;base64,"+e;const n=atob(t.split(",")[1]),o=t.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(n.length),s=new Uint8Array(r);for(let e=0;e<n.length;e++)s[e]=n.charCodeAt(e);return new Blob([r],{type:o})}(n);const o=document.createElement("a");return o.href=URL.createObjectURL(t),o.download="upscaled_image.png",o.click(),URL.revokeObjectURL(o.href),n})).catch((e=>console.error("error",e)))}},W=(e,t)=>{const n=new Headers;n.append("accept","application/json"),n.append("Content-Type","application/json");const o={method:"DELETE",headers:n,redirect:"follow"};let r=themeUrl.apiUrl;return t||(r=themeUrl.apiUrlFree),fetch(r+"agent-scheduler/v1/task/"+e,o).then((e=>e.json())).then((e=>!!e.success&&(console.log("kill task"),!0))).catch((e=>console.error("error",e)))},B=e=>{let t={};return document.cookie.split(";").forEach((function(e){let n=e.split("=");t[n[0].trim()]=n.slice(1).join("=")})),t[e]},Y=async e=>{const t=new FormData;return t.append("action","checkLastTask"),(async(e,t)=>{let n=await fetch(e,{method:"POST",credentials:"same-origin",body:t});return await n.json()})(themeUrl.ajax_url,t).then((async t=>{console.log("last user task id",t);let n="Task completed";return""!==t&&(n=await(async(e,t)=>{const n=new Headers;n.append("accept","application/json"),n.append("Content-Type","application/json");const o={method:"GET",headers:n,redirect:"follow"};let r=themeUrl.apiUrl;return t||(r=themeUrl.apiUrlFree),fetch(r+"agent-scheduler/v1/task/"+e+"/results?zip=false",o).then((e=>e.json())).then((e=>(console.log(e),e.success?(console.log("Image created"),e.data.status):(console.log("Image is:",e.message),e.message)))).catch((e=>console.error("error",e)))})(t,e)),{taskID:t,status:n}})).catch((e=>{console.log(e)}))},V=()=>!!document.querySelector("body").classList.contains("premium");window.location.search&&(()=>{const e=document.querySelector(".choose-model"),t=document.querySelector(".choose-scene"),n=document.querySelector(".choose-char"),o=document.querySelector('input[name="details"]'),r=document.querySelector("#details-value"),s=document.querySelector('input[name="steps"]'),i=document.querySelector("#quality-value"),a=document.querySelector('input[name="aspect-ratio"]');function c(e){var t=null,n=[];return location.search.substr(1).split("&").forEach((function(o){(n=o.split("="))[0]===e&&(t=decodeURIComponent(n[1]))})),t}const l=c("style"),d=c("action"),u=c("char"),h=c("details"),m=c("steps"),p=c("size");console.log(l),l&&(e.textContent="Style: "+l),d&&(t.textContent="Action: "+d),u&&(n.textContent="Char: "+u),h&&(o.value=h,r.textContent=h),m&&(s.value=m,i.textContent=m),p&&("512x960"===p&&(a.value="9/16"),"960x512"===p&&(a.value="16/9"),"512x512"===p&&(a.value="1/1"))})();let $=!1;$=!!document.querySelector("body").classList.contains("premium");const Z=async()=>{let e=!1;const t=document.querySelector(".creation-form");let n=!1,r="",s="",i="",u=!1;t.addEventListener("submit",(async e=>{e.preventDefault()})),t.querySelector(".clear").addEventListener("click",(e=>{e.preventDefault(),document.querySelector(".choose-model").textContent="Style",document.querySelector(".choose-scene").textContent="Action",document.querySelector(".choose-char").textContent="Characters",document.querySelector(".user-faces").textContent="Saved faces",t.reset()}));const h=await(async()=>{const e=new FormData;return e.append("action","isLoggedIn"),(async(e,t)=>{let n=await fetch(e,{method:"POST",credentials:"same-origin",body:t});return await n.json()})(themeUrl.ajax_url,e).then((e=>e)).catch((e=>{console.log(e)}))})();if(V()){const e=document.querySelector('textarea[name="prompt"]');e.addEventListener("blur",(async t=>{const n=[],o=e.value.split(/[,\s]+/);n.push(...o);const r=await(async e=>(async(e,t)=>{let n=await fetch(e,{method:"GET",credentials:"same-origin",body:void 0});return await n})(themeUrl.themeUrl+"/words.txt").then((e=>e.text())).then((t=>{const n=t.split("\n").map((e=>e.replace(/\r/g,"").trim().toLowerCase())),o=e.filter((e=>n.includes(e.toLowerCase())));return!(o.length>0)||{response:!1,matchingWords:o}})).catch((e=>{console.log(e)})))(n);console.log(r),!1===r.response?(document.querySelector(".generate").disabled=!0,document.querySelector(".error-notify").classList.add("show"),document.querySelector("#keyword").textContent=r.matchingWords,setTimeout((function(){document.querySelector(".error-notify").classList.remove("show")}),1e3)):document.querySelector(".generate").disabled=!1}))}const m=window.location.href.match(/[?&]seed=([^&]+)/);document.querySelector(".gen-bottom").addEventListener("click",(e=>{document.querySelector("header").scrollIntoView({behavior:"smooth"})})),document.querySelectorAll(".generate").forEach((t=>{t.addEventListener("click",(async t=>{if(document.querySelector(".saveface").disabled=!1,document.querySelector(".saveface").textContent="Save face",h){O(t.target,"start");const n=await Y($);if(console.log(n),"Task is pending"===n.status){const o=n.taskID;if(""!==n.taskID){if(console.log(o),O(t.target,"already-generating"),e=!1,u=!0,void 0===o)return M("lastGeneratedId","",1),O(t.target,"error"),X("Error"),void(document.querySelector("#premium-queue").textContent="Please try again.");let n=await a($);if(n.currentTaskId!==o)if(X("16"),$){if(!e){X("33");let t=await c(o,$);for(;"done"!==t&&!e;){X("66"),n=await a($);const r=await H(o,$);if(await N(r.pos,""),t=await c(o,$),t&&e)break;await new Promise((e=>setTimeout(e,1e3)))}}}else{if(!e){X("33");let t=n.currentTaskId;for(;t!==o&&!e;){X("premium"),n=await a($);const s=await H(o,$);if(N(s.pos,""),t=n.currentTaskId,""===r||e)break;await new Promise((e=>setTimeout(e,1e3)))}e||await c(o,$)}if(!e){let t=await c(o,$);for(;"done"!==t&&!e;){t=await c(o,$),X("66"),n=await a($);const r=await H(o,$);if(await N(r.pos,""),e)break;await new Promise((e=>setTimeout(e,1e3)))}X("66")}}else if(!e){let t=await c(o,$);for(X("66");"done"!==t&&!e;){if(X("66"),n=await a($),!n){e=!0;break}{const n=await H(o,$);if(await N(n.pos,""),t=await c(o,$),e)break;await new Promise((e=>setTimeout(e,1e3)))}}}if(e)O(t.target,"stopped"),M("lastGeneratedId","",1),e=!1;else{X("99"),s=await l(o,$);const e=await d(o,$);if(e.image){const t=e.infotext.match(/Seed: (\d+)/);t&&(s=t[1],i=s,console.log("Done seed: "+s)),document.querySelector(".saveface").dataset.id=o,O(document.querySelector(".generate"),"end"),await F(e.image,$,"9/16"),X("100"),document.querySelector(".upscale").classList.remove("hidden")}else X("Error")}}}else{t.preventDefault(),e=!1,u?$?m&&document.querySelector("#seed").checked?s=m?m[1]:null:m&&!document.querySelector("#seed").checked?s="-1":!m&&document.querySelector("#seed").checked?s=i:(m||document.querySelector("#seed").checked)&&(m||document.querySelector("#seed"))||(s="-1"):s="-1":s=m&&!document.querySelector("#seed").checked?m?m[1]:null:"-1",u=!0;const n=await(async(e,t)=>{const n=new Headers;n.append("accept","application/json"),n.append("Content-Type","application/json"),document.querySelector(".creation-form");const r=document.querySelector(".tabs-container"),s=(r.querySelectorAll('input[type="radio"]'),r.querySelectorAll('input[type="checkbox"]'),r.querySelectorAll('input[type="radio"], input[type="checkbox"]'));let i={width:512,height:768};if(document.querySelector('input[name="aspect-ratio"]')){const e=document.querySelector(".col-wrapper"),t=document.querySelector('input[name="aspect-ratio"]:checked');e.classList.remove("square","normal","horizontal"),"9/16"===t.value?(i={width:512,height:768},e.classList.add("normal")):"1/1"===t.value?(i={width:512,height:512},e.classList.add("square")):(i={width:768,height:512},e.classList.add("horizontal"))}const a=document.querySelectorAll('input[name="checkpoint"]');let c={sampler:"",name:"",cfg:"",negative:""};const l=document.querySelectorAll('input[name="action"]');let d={triggerWord:"",loraInput:""};const u=document.querySelectorAll('input[name="char"]');let h={triggerWord:"",loraInput:""};const m=document.querySelectorAll('input[name="face"]');let p={taskid:""},f="",g="",v=!1;const y=[];let w="",L="";if(e){const e=document.querySelector('input[name="steps"]'),t=document.querySelector('textarea[name="prompt"]');g=document.querySelector('input[name="details"]').value,w=t.value,f=e.value}else{if(document.querySelector("body").classList.contains("premium")){const e=document.querySelector('textarea[name="prompt"]');w=e.value}f=20,g=0}if(a.forEach((e=>{e.checked&&(c.name=e.value,c.sampler=e.dataset.id,c.cfg=e.dataset.cfg||"7",c.negative=e.dataset.neg)})),s.forEach((e=>{e.checked&&(y.push(e.value),y.push(e.dataset.lora),v=!0)})),l.forEach((e=>{e.checked&&(d.triggerWord=e.value,d.loraInput=e.dataset.id)})),u.forEach((e=>{e.checked&&(h.triggerWord=e.value,h.loraInput=e.dataset.id)})),m.forEach((e=>{e.checked&&(p.taskid=e.id)})),v){const e=y.join(", ");console.log(e),L=w+", "+e}else""===w?u.forEach((t=>{if(t.checked&&"none"===t.id){s.length;const t=Array.from(s).filter((e=>"get-premium"!==e.name)),n=Array.from(t).sort((()=>Math.random()-.5)).slice(0,5);let o=n.map((e=>e.value)).join(", "),r=n.map((e=>e.dataset.lora)).filter(Boolean).join(", ");console.log(r),L=e?w+", "+o+" "+r:o+" "+r}})):L=w;L=function(e,t,n){const o=[{trigger:n.triggerWord,value:n.loraInput},{trigger:t.triggerWord,value:t.loraInput}];let r="";for(const{trigger:e,value:t}of o)e&&(r+=e),t&&(r+=", "+t);return e&&(r+=" "+e),r+=" <lora:more_details:"+g+">",r}(L,d,h);let S={enable_hr:!0,denoising_strength:.5,hr_scale:1.5,hr_upscaler:"4xUltrasharp_4xUltrasharpV10",prompt:L,width:i.width,height:i.height,negative_prompt:"(AS-Adult-Neg:1.3), (child:2), (kid:2),"+c.negative,override_settings:{sd_model_checkpoint:c.name},sampler_name:c.sampler,sampler_index:c.sampler,cfg_scale:+c.cfg,styles:["string"],steps:+f,seed:t};if(""!==p.taskid&&"none"!==p.taskid)try{let e=[await o(p.taskid),!0,"0","0","inswapper_128.onnx","CodeFormer",1,!1,"4xUltrasharp_4xUltrasharpV10",1.25,1,!1,!0,2,0,0,!1,.5,!0,!1,"CUDA",!1,0,0,0];S.alwayson_scripts={reactor:{args:e}},console.log("Face set")}catch(e){console.error("Error fetching face image:",e)}const b={method:"POST",headers:n,body:JSON.stringify(S),redirect:"follow",referrerPolicy:"unsafe-url"};let E=themeUrl.apiUrl;return e||(E=themeUrl.apiUrlFree),fetch(E+"agent-scheduler/v1/queue/txt2img",b).then((e=>e.json())).then((e=>({task_id:e.task_id}))).catch((e=>console.error("error",e)))})($,s);if(r=n.task_id,console.log(r),M("lastGeneratedId",r,1),void 0===r)return M("lastGeneratedId","",1),O(t.target,"error"),X("Error"),void(document.querySelector("#premium-queue").textContent="Please try again.");X("0"),await(async e=>{const t=new FormData;return t.append("action","addTaskToUser"),t.append("taskID",e),(async(e,t)=>{let n=await fetch(e,{method:"POST",credentials:"same-origin",body:t});return await n.json()})(themeUrl.ajax_url,t).then((e=>(console.log(e.postid),e.postid))).catch((e=>{console.log(e)}))})(r);const h=V();let p="9/16";document.querySelector('input[name="aspect-ratio"]')&&(p=document.querySelector('input[name="aspect-ratio"]:checked').value),X("5");let f=await a(h);if(f.currentTaskId!==r)if(X("16"),h){if(!e){X("33");let t=await c(r,h);for(;"done"!==t&&!e;){X("66"),f=await a(h);const n=await H(r,h);if(await N(n.pos,""),t=await c(r,h),t&&e)break;await new Promise((e=>setTimeout(e,1e3)))}}}else{if(!e){X("33");let t=f.currentTaskId;for(;t!==r&&!e;){X("premium"),f=await a(h);const n=await H(r,h);if(N(n.pos,""),t=f.currentTaskId,""===r||e)break;await new Promise((e=>setTimeout(e,1e3)))}e||await c(r,h)}if(!e){let t=await c(r,h);for(;"done"!==t&&!e;){t=await c(r,h),X("66"),f=await a(h);const n=await H(r,h);if(await N(n.pos,""),e)break;await new Promise((e=>setTimeout(e,1e3)))}X("66")}}else if(!e){let t=await c(r,h);for(X("66");"done"!==t&&!e;){if(X("66"),f=await a(h),!f){e=!0;break}{const n=await H(r,h);if(await N(n.pos,""),t=await c(r,h),e)break;await new Promise((e=>setTimeout(e,1e3)))}}}if(e)O(t.target,"stopped"),M("lastGeneratedId","",1),e=!1;else{X("99"),s=await l(r,h);const e=await d(r,h);if(e.image){const t=e.infotext.match(/Seed: (\d+)/);t&&(s=t[1],i=s,console.log("Done seed: "+s)),document.querySelector(".saveface").dataset.id=r,O(document.querySelector(".generate"),"end"),await F(e.image,h,p),X("100"),document.querySelector(".upscale").classList.remove("hidden")}else X("Error")}}}else document.querySelector(".login-modal").classList.add("show"),document.querySelector("html").classList.add("modal-is-open")}))})),document.querySelector("#seed")&&document.querySelector("#seed").addEventListener("input",(async e=>{s=document.querySelector("#seed").checked?i:""})),document.querySelector(".stop-generate").addEventListener("click",(async t=>{t.preventDefault(),t.disabled=!0,e=!0,await(async(e,t)=>{O(document.querySelector(".generate"),"stopped");try{""!==e?(await W(e,t),X("")):""!==B("lastGeneratedId")&&(e=B("lastGeneratedId"),await W(e,t),X("")),e="",M("lastGeneratedId","",1)}catch(e){console.error("Error while stopping generation:",e)}})(r,$)})),document.querySelector(".stop-generate").addEventListener("dblclick",(async e=>{e.preventDefault()})),document.querySelector(".upscale").addEventListener("click",(async e=>{e.preventDefault(),$&&!n?(n=!0,O(e.target,"upscale"),await R($,document.querySelector(".generated-image").src)&&(document.querySelector(".upscale").disabled=!0,O(e.target,"end-upscale")),n=!1):document.querySelector(".premium-modal").classList.add("show")})),document.querySelector(".saveface").addEventListener("click",(async e=>{if(e.preventDefault(),$){const t=e.currentTarget,n=t.dataset.id;await(async e=>{const t=new FormData;return t.append("action","saveFaceToUserTask"),t.append("taskID",e),(async(e,t)=>{let n=await fetch(e,{method:"POST",credentials:"same-origin",body:t});return await n.json()})(themeUrl.ajax_url,t).then((e=>{console.log("Face saved")})).catch((e=>{console.log(e)}))})(n),await(async e=>{const t=document.querySelector(".user-faces .actions").querySelector("a.discord-btn");let n=document.querySelectorAll(".single-face").length,r=document.querySelectorAll(".single-face");r.item(r.length-1),11===n&&r[0].remove(),n+=1,console.log("Face to ui added"),await async function(){const r=document.createElement("div");r.classList.add("single-action"),r.classList.add("single-face"),r.dataset.id=e;const s=document.createElement("div");s.classList.add("wrapper"),r.append(s);const i=document.createElement("div");i.classList.add("action-input"),s.append(i);const a=document.createElement("input");a.type="radio",a.name="face",a.dataset.imgid="Face - "+n,a.id=e,i.append(a);const c=document.createElement("label");c.htmlFor=e,c.textContent="Face - "+n,i.append(c);const l=document.createElement("div");l.classList.add("action-image"),l.classList.add("face-image-wrap"),i.append(l);const d=document.createElement("div");d.classList.add("delete-face"),d.title="Delete face",d.dataset.id=e;const u=document.createElement("svg");u.innerHTML='<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path class="handle" d="M12 2.75C11.0215 2.75 10.1871 3.37503 9.87787 4.24993C9.73983 4.64047 9.31134 4.84517 8.9208 4.70713C8.53026 4.56909 8.32557 4.1406 8.46361 3.75007C8.97804 2.29459 10.3661 1.25 12 1.25C13.634 1.25 15.022 2.29459 15.5365 3.75007C15.6745 4.1406 15.4698 4.56909 15.0793 4.70713C14.6887 4.84517 14.2602 4.64047 14.1222 4.24993C13.813 3.37503 12.9785 2.75 12 2.75Z" fill="#ff950d"></path> <path class="cover" d="M2.75 6C2.75 5.58579 3.08579 5.25 3.5 5.25H20.5001C20.9143 5.25 21.2501 5.58579 21.2501 6C21.2501 6.41421 20.9143 6.75 20.5001 6.75H3.5C3.08579 6.75 2.75 6.41421 2.75 6Z" fill="#ff950d"></path> <path d="M5.91508 8.45011C5.88753 8.03681 5.53015 7.72411 5.11686 7.75166C4.70356 7.77921 4.39085 8.13659 4.41841 8.54989L4.88186 15.5016C4.96735 16.7844 5.03641 17.8205 5.19838 18.6336C5.36678 19.4789 5.6532 20.185 6.2448 20.7384C6.83639 21.2919 7.55994 21.5307 8.41459 21.6425C9.23663 21.75 10.2751 21.75 11.5607 21.75H12.4395C13.7251 21.75 14.7635 21.75 15.5856 21.6425C16.4402 21.5307 17.1638 21.2919 17.7554 20.7384C18.347 20.185 18.6334 19.4789 18.8018 18.6336C18.9637 17.8205 19.0328 16.7844 19.1183 15.5016L19.5818 8.54989C19.6093 8.13659 19.2966 7.77921 18.8833 7.75166C18.47 7.72411 18.1126 8.03681 18.0851 8.45011L17.6251 15.3492C17.5353 16.6971 17.4712 17.6349 17.3307 18.3405C17.1943 19.025 17.004 19.3873 16.7306 19.6431C16.4572 19.8988 16.083 20.0647 15.391 20.1552C14.6776 20.2485 13.7376 20.25 12.3868 20.25H11.6134C10.2626 20.25 9.32255 20.2485 8.60915 20.1552C7.91715 20.0647 7.54299 19.8988 7.26957 19.6431C6.99616 19.3873 6.80583 19.025 6.66948 18.3405C6.52891 17.6349 6.46488 16.6971 6.37503 15.3492L5.91508 8.45011Z" fill="#ff950d"></path> <path d="M9.42546 10.2537C9.83762 10.2125 10.2051 10.5132 10.2464 10.9254L10.7464 15.9254C10.7876 16.3375 10.4869 16.7051 10.0747 16.7463C9.66256 16.7875 9.29502 16.4868 9.25381 16.0746L8.75381 11.0746C8.71259 10.6625 9.0133 10.2949 9.42546 10.2537Z" fill="#ff950d"></path> <path d="M15.2464 11.0746C15.2876 10.6625 14.9869 10.2949 14.5747 10.2537C14.1626 10.2125 13.795 10.5132 13.7538 10.9254L13.2538 15.9254C13.2126 16.3375 13.5133 16.7051 13.9255 16.7463C14.3376 16.7875 14.7051 16.4868 14.7464 16.0746L15.2464 11.0746Z" fill="#ff950d"></path> </g></svg>',d.append(u),i.append(d);const h=document.createElement("div");h.classList.add("spinner"),h.classList.add("show"),l.append(h);const m=document.createElement("span");m.classList.add("loader"),h.append(m);const p=document.createElement("img");p.dataset.id=e,p.alt=e,p.classList.add("face-image"),p.classList.add("face-"+n),h.append(p);try{const t=await o(e);m.classList.add("hide"),p.src=t}catch(e){console.error("Error loading face image:",e)}t.before(r)}()})(n),t.disabled=!0,t.textContent="Saved"}else document.querySelector(".premium-modal").classList.add("show")}))},Q=function(e){return""==e.value.replace(/\s+/g,"")},J=(e,t)=>{return!e.classList.contains("error")&&(Q(e)?(e.classList.add("error"),t.textContent=themeUrl.mail_empty,!1):!(n=e.value,!n.match(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)&&(e.classList.add("error"),t.textContent=themeUrl.mail_error,1)));var n},K=()=>{const e=document.querySelector("form.content-removal"),t=(e.querySelector("button.send-form"),e.querySelector("p.error-msg")),n=e.querySelector('input[name="email"]'),o=e.querySelector('input[name="url"]'),r=e.querySelector("textarea"),s={loading:themeUrl.loading,success:themeUrl.success,failure:themeUrl.failure};n.addEventListener("change",(()=>{n.classList.contains("error")&&(n.classList.remove("error"),t.classList.remove("field-error"),t.classList.remove("show"),n.previousElementSibling.classList.remove("error"),t.textContent="")})),o.addEventListener("change",(()=>{o.classList.contains("error")&&(o.classList.remove("error"),t.classList.remove("field-error"),t.classList.remove("show"),o.previousElementSibling.classList.remove("error"),t.textContent="")})),r.addEventListener("change",(()=>{r.classList.contains("error")&&(r.classList.remove("error"),t.classList.remove("field-error"),t.classList.remove("show"),r.previousElementSibling.classList.remove("error"),t.textContent="")}));e.addEventListener("submit",(i=>{if(i.preventDefault(),!J(n,t)&&(n.previousElementSibling.classList.add("error"),1)||!(Q(o)?(t.textContent=themeUrl.url_empty,0):(o.previousElementSibling.classList.add("error"),1))||Q(r)&&(t.textContent=themeUrl.info_empty,r.previousElementSibling.classList.add("error"),r.classList.add("error"),1))return!1;let a=new FormData(e);(async(e,n)=>{t.textContent=s.loading;let o=await fetch(e,{method:"POST",body:n});return await o.text()})(themeUrl.themeUrl+"/includes/send-removal-form.php",a).then((e=>{window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"form_registration"}),t.textContent=s.success})).catch((()=>{t.textContent=s.failure})).finally((()=>{e.reset(),setTimeout((()=>{t.textContent="",modal.classList.remove("show"),html.classList.remove("modal-is-open")}),1e3)}))}))},ee=()=>{const e=document.querySelector("form.contact-support"),t=(e.querySelector("button.send-form"),e.querySelector("p.error-msg")),n=e.querySelector('input[name="email"]'),o=e.querySelector("#reasons"),r=e.querySelector("textarea"),s={loading:themeUrl.loading,success:themeUrl.success,failure:themeUrl.failure};o.addEventListener("click",(()=>{t.textContent="",o.classList.remove("error")})),n.addEventListener("change",(()=>{n.classList.contains("error")&&(n.classList.remove("error"),t.classList.remove("field-error"),t.classList.remove("show"),n.previousElementSibling.classList.remove("error"),t.textContent="")})),r.addEventListener("change",(()=>{r.classList.contains("error")&&(r.classList.remove("error"),t.classList.remove("field-error"),t.classList.remove("show"),r.previousElementSibling.classList.remove("error"),t.textContent="")}));e.addEventListener("submit",(i=>{if(i.preventDefault(),!J(n,t)&&(n.previousElementSibling.classList.add("error"),1)||(o.querySelector(".select-selected").textContent===themeUrl.type_value?(t.textContent=themeUrl.empty_reason,o.classList.add("error"),1):Q(r)&&(t.textContent=themeUrl.msg_empty,r.previousElementSibling.classList.add("error"),r.classList.add("error"),1)))return!1;let a=new FormData(e);(async(e,n)=>{t.textContent=s.loading;let o=await fetch(e,{method:"POST",body:n});return await o.text()})(themeUrl.themeUrl+"/includes/send-contact-form.php",a).then((e=>{window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"form_registration"}),t.textContent=s.success})).catch((()=>{t.textContent=s.failure})).finally((()=>{e.reset(),o.querySelector(".select-selected").textContent=themeUrl.type_value,setTimeout((()=>{t.textContent="",modal.classList.remove("show"),html.classList.remove("modal-is-open")}),1e3)}))}))};var te=function(e){return this._sizes=[],this._columns=[],this._container=null,this._count=null,this._width=0,this._removeListener=null,this._currentGutterX=null,this._currentGutterY=null,this._resizeTimeout=null,this.conf={baseWidth:255,gutterX:null,gutterY:null,gutter:10,container:null,minify:!0,ultimateGutter:5,surroundingGutter:!0,direction:"ltr",wedge:!1},this.init(e),this};te.prototype.init=function(e){for(var t in this.conf)null!=e[t]&&(this.conf[t]=e[t]);if(null!=this.conf.gutterX&&null!=this.conf.gutterY||(this.conf.gutterX=this.conf.gutterY=this.conf.gutter),this._currentGutterX=this.conf.gutterX,this._currentGutterY=this.conf.gutterY,this._container="object"==typeof this.conf.container&&this.conf.container.nodeName?this.conf.container:document.querySelector(this.conf.container),!this._container)throw new Error("Container not found or missing");var n=this.resizeThrottler.bind(this);window.addEventListener("resize",n),this._removeListener=function(){window.removeEventListener("resize",n),null!=this._resizeTimeout&&(window.clearTimeout(this._resizeTimeout),this._resizeTimeout=null)},this.layout()},te.prototype.reset=function(){this._sizes=[],this._columns=[],this._count=null,this._width=this._container.clientWidth;var e=this.conf.baseWidth;this._width<e&&(this._width=e,this._container.style.minWidth=e+"px"),1==this.getCount()?(this._currentGutterX=this.conf.ultimateGutter,this._count=1):this._width<this.conf.baseWidth+2*this._currentGutterX?this._currentGutterX=0:this._currentGutterX=this.conf.gutterX},te.prototype.getCount=function(){return this.conf.surroundingGutter?Math.floor((this._width-this._currentGutterX)/(this.conf.baseWidth+this._currentGutterX)):Math.floor((this._width+this._currentGutterX)/(this.conf.baseWidth+this._currentGutterX))},te.prototype.computeWidth=function(){var e;return e=this.conf.surroundingGutter?(this._width-this._currentGutterX)/this._count-this._currentGutterX:(this._width+this._currentGutterX)/this._count-this._currentGutterX,Number.parseFloat(e.toFixed(2))},te.prototype.layout=function(){if(this._container){this.reset(),null==this._count&&(this._count=this.getCount());for(var e=this.computeWidth(),t=0;t<this._count;t++)this._columns[t]=0;for(var n,o=this._container.children,r=0;r<o.length;r++)o[r].style.width=e+"px",this._sizes[r]=o[r].clientHeight;if(n="ltr"==this.conf.direction?this.conf.surroundingGutter?this._currentGutterX:0:this._width-(this.conf.surroundingGutter?this._currentGutterX:0),this._count>this._sizes.length){var s=this._sizes.length*(e+this._currentGutterX)-this._currentGutterX;!1===this.conf.wedge?n="ltr"==this.conf.direction?(this._width-s)/2:this._width-(this._width-s)/2:"ltr"==this.conf.direction||(n=this._width-this._currentGutterX)}for(var i=0;i<o.length;i++){var a,c=this.conf.minify?this.getShortest():this.getNextColumn(i),l=0;(this.conf.surroundingGutter||c!=this._columns.length)&&(l=this._currentGutterX),a="ltr"==this.conf.direction?n+(e+l)*c:n-(e+l)*c-e;var d=this._columns[c];o[i].style.transform="translate3d("+Math.round(a)+"px,"+Math.round(d)+"px,0)",this._columns[c]+=this._sizes[i]+(this._count>1?this.conf.gutterY:this.conf.ultimateGutter)}this._container.style.height=this._columns[this.getLongest()]-this._currentGutterY+"px"}else console.error("Container not found")},te.prototype.getNextColumn=function(e){return e%this._columns.length},te.prototype.getShortest=function(){for(var e=0,t=0;t<this._count;t++)this._columns[t]<this._columns[e]&&(e=t);return e},te.prototype.getLongest=function(){for(var e=0,t=0;t<this._count;t++)this._columns[t]>this._columns[e]&&(e=t);return e},te.prototype.resizeThrottler=function(){this._resizeTimeout||(this._resizeTimeout=setTimeout(function(){this._resizeTimeout=null,this._container.clientWidth!=this._width&&this.layout()}.bind(this),33))},te.prototype.destroy=function(){"function"==typeof this._removeListener&&this._removeListener();for(var e=this._container.children,t=0;t<e.length;t++)e[t].style.removeProperty("width"),e[t].style.removeProperty("transform");this._container.style.removeProperty("height"),this._container.style.removeProperty("min-width")};var ne=n(710),oe=n.n(ne);const re=()=>{const e=document.querySelectorAll(".insta-cancel"),t=document.querySelector(".cancel-reason"),n=document.querySelector(".spinner-area"),o=document.querySelector(".submit-cancel-form"),r=document.querySelector("#cancel-step1"),s=document.querySelector("#cancel-step2"),i=document.querySelector("#cancel-step3"),a=document.querySelector("#cancel-step4"),c=document.querySelector("#cancel-step5"),l=(r.querySelector("textarea"),document.querySelector(".error-msg")),d=document.querySelectorAll('input[name="reasonInput[]"]');let u=!1;const h=document.querySelector(".update-sub");function m(){s.classList.add("hidden"),r.classList.add("hidden"),i.classList.remove("hidden")}const p={loading:themeUrl.loading,success:themeUrl.success,failure:themeUrl.failure};d.forEach((e=>{e.addEventListener("click",(e=>{u=!0,l.textContent="",d.forEach((e=>{e.parentElement.classList.remove("error")}))}))}));t.addEventListener("submit",(e=>{e.preventDefault()})),o.addEventListener("click",(e=>{if(e.preventDefault(),!u&&(d.forEach((e=>{e.parentElement.classList.add("error"),l.textContent=themeUrl.cancel_reason})),1))return!1;n.classList.remove("hidden");let o=new FormData(t);(async(e,t)=>{l.textContent=p.loading;let n=await fetch(e,{method:"POST",body:t});return await n.text()})(themeUrl.themeUrl+"/includes/cancel-reason.php",o).then((e=>{l.textContent=p.success})).catch((()=>{l.textContent=p.failure,n.classList.add("hidden")})).finally((()=>{s.classList.remove("hidden"),r.classList.add("hidden"),n.classList.add("hidden")}))})),e.forEach((e=>{e.addEventListener("click",(t=>{const o=e.value,r=e.dataset.userid;t.preventDefault(),n.classList.remove("hidden"),console.log("clicked canced");const i=new FormData;return i.append("action","cancelSubscription"),i.append("subID",o),i.append("userID",r),(async(e,t)=>{let n=await fetch(e,{method:"POST",credentials:"same-origin",body:t});return await n.json()})(themeUrl.ajax_url,i).then((e=>{if(console.log(e),n.classList.add("hidden"),!e.success){const e=async(e,t)=>{let n=await fetch(e,{method:"POST",credentials:"same-origin",body:t});return await n.json()},t=new FormData;return t.append("action","cancelSubscription2"),t.append("subID",o),t.append("userID",r),e(themeUrl.ajax_url,t).then((e=>{console.log(e),n.classList.add("hidden"),e.success?(s.classList.add("hidden"),c.classList.remove("hidden")):m()})).catch((e=>{console.log(e),m(),n.classList.add("hidden")}))}location.reload()})).catch((e=>{console.log(e),m(),n.classList.add("hidden")}))}))})),h.addEventListener("click",(e=>{const t=h.value,o=h.dataset.userid;e.preventDefault(),n.classList.remove("hidden"),console.log("clicked update");const r=new FormData;return r.append("action","updateSubscription"),r.append("subItemID",t),r.append("userID",o),(async(e,t)=>{let n=await fetch(e,{method:"POST",credentials:"same-origin",body:t});return await n.json()})(themeUrl.ajax_url,r).then((e=>{console.log(e),n.classList.add("hidden"),e.success?(s.classList.add("hidden"),a.classList.remove("hidden")):m()})).catch((e=>{console.log(e),m(),n.classList.add("hidden")}))}))};window.addEventListener("DOMContentLoaded",(async()=>{if(document.querySelector(".site-loader").classList.add("hide"),r(),(()=>{const e=window.location.search;document.querySelectorAll(".modals"),e.startsWith("?logout")})(),document.querySelector("body").classList.contains("logged-in")||(()=>{const e=document.querySelector("#switch-to-register"),t=document.querySelector("#switch-to-login"),n=document.querySelector(".login-block"),o=document.querySelector(".register-block");e.addEventListener("click",(()=>{n.classList.add("hidden"),o.classList.remove("hidden")})),t.addEventListener("click",(()=>{n.classList.remove("hidden"),o.classList.add("hidden")}))})(),document.querySelector(".tooltip-icon")&&(()=>{const e=document.querySelector(".tooltip-icon"),t=document.querySelector(".tooltip-modal");e.addEventListener("mouseenter",(()=>{t.classList.add("show")})),e.addEventListener("mouseleave",(()=>{t.classList.remove("show")})),window.addEventListener("click",(e=>{e.target.classList.contains("tooltip-modal")&&t.classList.remove("show")}))})(),document.querySelector("video")&&function(){const e=new IntersectionObserver((e=>{e.forEach((e=>{const t=e.target;0!==t.currentTime&&(!e.isIntersecting||e.intersectionRatio<=.2?t.pause():t.play())}))}),{threshold:[0,.8]});document.querySelectorAll("video").forEach((t=>e.observe(t)))}(),document.querySelector(".create-page-template")&&(Z(),(()=>{const e=document.querySelectorAll(".form-tab-button"),t=document.querySelectorAll(".single-tab-container");document.querySelectorAll(".clear-question").forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault();const n=e.dataset.clear;document.querySelectorAll(`input[name="${n}"]`).forEach((e=>{"radio"===e.type||"checkbox"===e.type?e.checked=!1:"text"!==e.type&&"TEXTAREA"!==e.tagName||(e.value="")}))}))})),e.forEach((n=>{n.addEventListener("click",(o=>{o.preventDefault();const r=n.getAttribute("data-id");e.forEach((e=>{e.classList.remove("active")})),n.classList.add("active"),t.forEach((e=>{e.classList.add("hidden")}));const s=document.querySelector(`.${r}`);s&&s.classList.remove("hidden")}))})),e.forEach((e=>{e.classList.remove("active")})),t.forEach((e=>{e.classList.add("hidden")})),e[0].classList.add("active"),t[0].classList.remove("hidden")})(),i(),((e,t)=>{const n=document.querySelectorAll(e),o=document.querySelectorAll(t),r=e=>{"all"===n[e].dataset.id?o.forEach((e=>{e.classList.remove("hidden")})):o.forEach((t=>{t.classList.contains(n[e].dataset.id)?t.classList.remove("hidden"):t.classList.add("hidden")})),n.forEach((e=>e.classList.remove("active"))),n[e].classList.add("active")};n.forEach(((e,t)=>{e.addEventListener("click",(()=>{r(t)}))})),r(0)})(".single-filter",".single-char")),document.querySelector(".main-modal-blur")){(()=>{const e=document.querySelector(".close-modal-button"),t=document.querySelector(".main-modal-blur"),n=document.querySelector("html");e.addEventListener("click",(e=>{o()}));const o=()=>{localStorage.setItem("prompt-modal","Off"),n.classList.remove("modal-is-open"),t.classList.remove("open")};window.addEventListener("click",(e=>{e.target.classList.contains("main-modal-blur")&&o()})),window.addEventListener("keyup",(function(e){27==e.keyCode&&o()}))})();const e=document.querySelector(".main-modal-blur"),t=document.querySelector("html");"Off"===localStorage.getItem("prompt-modal")?e.classList.add("disabled"):setTimeout((function(){e.classList.add("open"),t.classList.add("modal-is-open"),console.log("1")}),parseFloat(1e3*modal_timer))}if(document.querySelector(".account-page-template"),document.querySelector(".single-generated-image-page")&&(e=>{document.querySelector(".image");const t=document.querySelectorAll(".single-image"),n=new Headers;n.append("accept","application/json"),n.append("Content-Type","application/json");const o={method:"GET",headers:n,redirect:"follow",keepalive:!0};let r=themeUrl.apiUrl;t.forEach((e=>{const t=e.querySelector(".spinner"),n=e.querySelector(".hub-single-image");t.classList.add("show"),fetch(r+"agent-scheduler/v1/task/"+n.dataset.id+"/results?zip=false",o).then((e=>e.json())).then((s=>{if(!1!==s.success){console.log("false");let e=s.data[0].image;n.src=e,t.classList.remove("show"),n.classList.remove("hide"),n.classList.add("show")}else r=themeUrl.apiUrlFree,fetch(r+"agent-scheduler/v1/task/"+n.dataset.id+"/results?zip=false",o).then((e=>e.json())).then((o=>{if(!1!==o.success){let e=o.data[0].image;n.src=e,t.classList.remove("show"),n.classList.remove("hide"),n.classList.add("show")}else e.classList.add("hide")})).catch((e=>{console.error(e)}))})).catch((e=>{console.error(e)}))}))})(),document.querySelector(".single-image-id")&&await(async()=>{const e=document.querySelector("#taskid"),t=document.querySelector("#taskid").dataset.id,n=document.querySelector("#singleImage"),o=document.querySelector(".image-area"),r=document.querySelector("#infolist"),s=r.querySelector(".loaderis .spinner"),i=document.createElement("div");i.classList.add("actions-chars"),e.append(i);const a=V();let c={style:"",action:"",char:"",prompt:"",seed:"",size:"",steps:"",details:""};document.querySelector(".reuse-settings")&&(document.querySelector(".reuse-settings").disabled=!0,document.querySelector(".reuse-settings").addEventListener("click",(e=>{e.preventDefault();const t=[];for(const e in c)c[e]&&t.push(`${e}=${encodeURIComponent(c[e])}`);const n=t.join("&"),o="/create/"+(n?`?${n}`:"");window.location.href=o})));const l=new Headers;l.append("accept","application/json"),l.append("Content-Type","application/json");let d=themeUrl.apiUrl;return fetch(d+"agent-scheduler/v1/task/"+t+"/results?zip=false").then((e=>e.json())).then((async e=>{if(console.log("cia",e),!1===e.success)return d=themeUrl.apiUrlFree,fetch(d+"agent-scheduler/v1/task/"+t+"/results?zip=false").then((e=>e.json())).then((async e=>{if(console.log(e),!1!==e.success){let o=e.data[0].image,r=e.data[0].infotext;const s=await m(d,t);await u(o,s),h(r),n.querySelector(".spinner").classList.remove("show"),document.querySelector(".reuse-settings")&&(document.querySelector(".reuse-settings").disabled=!1)}})).catch((e=>{console.error(e)}));{let o=e.data[0].image,r=e.data[0].infotext;const s=await m(d,t);await u(o,s),h(r),n.querySelector(".spinner").classList.remove("show"),document.querySelector(".reuse-settings")&&(document.querySelector(".reuse-settings").disabled=!1)}})).catch((e=>{console.error(e)}));async function u(e,t){const o=document.createElement("div");o.classList.add("single-wrapper"),n.prepend(o);const r=document.createElement("div");r.classList.add("post-image"),o.append(r);const s=document.createElement("img");if(a)return s.src=e,r.append(s),s.classList.add("hub-single-image"),s.classList.add("show"),s.alt="IceGirls.ai generated image",s;await z([e,themeUrl.themeUrl+"/assets/images/watermark.jpg"]).image(((e,n)=>{const o=e.getContext("2d"),r=e.width,s=e.height,i=.4*r,a=i/n.width*n.height;let c,l;return"512x512"===t?(c=r/10*.5,l=s/10*9):"512x768"===t?(c=r/9*1,l=s/16*15):(c=r/16*.5,l=s/9*5.75),o.save(),o.globalAlpha=.5,o.drawImage(n,c,l,i,a),o.restore(),e})).then((e=>{r.appendChild(e),e.classList.add("hub-single-image"),e.classList.add("show"),e.alt="IceGirls.ai generated image"}))}function h(e){const t=e.match(/Seed: (\d+)/);return c.seed=t[1],t}async function m(e,t){const a=new Headers;let l;return a.append("accept","application/json"),a.append("Content-Type","application/json"),fetch(e+"agent-scheduler/v1/task/"+t).then((e=>e.json())).then((async e=>{if(!0===e.success){const d=e.data.params.checkpoint,u=e.data.params.height,h=e.data.params.width;l=h+"x"+u;const m=e.data.params.prompt,p=e.data.params.steps,f=m.replace(/<lora:[^>]+>/g,""),g=await(a=d,new Promise(((e,t)=>{const n=new FormData;n.append("action","get_nice_cp_title"),n.append("model",a),(async(e,t)=>{let o=await fetch(e,{method:"POST",credentials:"same-origin",body:n});return await o.json()})(themeUrl.ajax_url).then((n=>{n?e(n):t("Failed to get nice CP title")})).catch((e=>{t(e)}))})));let v="normal";"512x512"==l?v="square":"768x512"==l&&(v="horizontal"),n.classList.add(v),o.classList.add(v);const y=m.match(/<lora:([^:]+):([^>]+)>/g),w=y.map((e=>{const[,t,n]=e.match(/<lora:([^:]+):([^>]+)>/);return{key:t.replace(/_/g," ").replace(/\b\w/g,(e=>e.toUpperCase())).replace(/\d/g,"").replace(".","").replace(" ",""),value:n}})),L=await(t=y,new Promise(((e,n)=>{const o=new FormData;o.append("action","get_lora_info"),o.append("loras",t),(async(e,t)=>{let n=await fetch(e,{method:"POST",credentials:"same-origin",body:o});return await n.json()})(themeUrl.ajax_url).then((t=>{if(t){const n=t.actions,o=t.chars;e({Actions:n,Chars:o})}else n("Failed")})).catch((e=>{n(e)}))}))),S=function(e,t){let n=e;for(const e in t)if(t.hasOwnProperty(e)){const o=t[e];n=n.replace(o.trigger,"")}return n=n.replace(/^[, ]+/,""),n}(f,L);c.prompt=S;const b=[{label:"Size",value:l},{label:"Image Quality",value:p},{label:"Prompt",value:S}];return w.forEach((e=>{"MoreDetails"==e.key&&b.push({label:e.key,value:e.value})})),s.classList.remove("show"),b.forEach((e=>{const t=document.createElement("p");"MoreDetails"==e.label?c.details=e.value:"Size"==e.label?c.size=e.value:"Image Quality"==e.label&&(c.steps=e.value),t.classList.add("info-title"),t.textContent=e.label+": ";const n=document.createElement("span");t.appendChild(n);const o=document.createElement("span");o.textContent=e.value,o.classList.add("info-ans"),t.appendChild(o),r.appendChild(t)})),function(e,t){(function(e){if(0!==e.length){c.style=e.model;const t=document.createElement("div");t.classList.add("style-wrapper"),i.append(t);const n=document.createElement("p");n.classList.add("top"),n.textContent="Style",t.append(n);const o=document.createElement("div");o.classList.add("chars-grid"),t.append(o);const r=document.createElement("div");r.classList.add("single-style"),o.append(r);const s=document.createElement("div");s.classList.add("wrapper"),r.append(s);const a=document.createElement("div");a.classList.add("style-input"),s.append(a);const l=document.createElement("label");l.textContent=e.model,a.append(l);const d=document.createElement("div");d.classList.add("style-image"),a.append(d);const u=document.createElement("img");u.src=e.image,d.append(u)}})(t),function(e){if(0!==e.length){c.action=e.title;const t=document.createElement("div");t.classList.add("actions-wrapper"),i.append(t);const n=document.createElement("p");n.classList.add("top"),n.textContent="Actions",t.append(n);const o=document.createElement("div");o.classList.add("actions-grid"),t.append(o);const r=document.createElement("div");r.classList.add("single-action"),o.append(r);const s=document.createElement("div");s.classList.add("wrapper"),r.append(s);const a=document.createElement("div");a.classList.add("action-input"),s.append(a);const l=document.createElement("label");l.textContent=e.title,a.append(l);const d=document.createElement("div");d.classList.add("action-image"),a.append(d);const u=document.createElement("img");u.src=e.image,d.append(u)}}(e.Actions),function(e){if(0!==e.length){c.char=e.title;const t=document.createElement("div");t.classList.add("chars-wrapper"),i.append(t);const n=document.createElement("p");n.classList.add("top"),n.textContent="Charachter",t.append(n);const o=document.createElement("div");o.classList.add("chars-grid"),t.append(o);const r=document.createElement("div");r.classList.add("single-char"),o.append(r);const s=document.createElement("div");s.classList.add("wrapper"),r.append(s);const a=document.createElement("div");a.classList.add("char-input"),s.append(a);const l=document.createElement("label");l.textContent=e.title,a.append(l);const d=document.createElement("div");d.classList.add("char-image"),a.append(d);const u=document.createElement("img");u.src=e.image,d.append(u)}}(e.Chars)}(L,g),l}var t,a})).catch((e=>{console.error(e)}))}})(),document.querySelector(".hub-page-template")&&await(async()=>{const e=V();let t=!0,n=0;const o=document.querySelector(".hub-page-template .container"),r=document.createElement("div");r.classList.add("generated-images-wrapper"),o.append(r),new te({container:".generated-images-wrapper"}),t?(t=!1,n=1):n++;let s=!1,i=themeUrl.apiUrl;async function a(t,n){n.forEach((t=>{const n=t.id,o=`${t.params.width}x${t.params.height}`;let s="normal";"512x512"==o?s="square":"768x512"==o&&(s="horizontal");const a=document.createElement("div");a.classList.add("single-image"),a.classList.add(s),r.append(a);const c=document.createElement("a");c.href="/generated-images/"+n,a.append(c);const l=document.createElement("div");l.classList.add("loaderis");const d=document.createElement("div");d.classList.add("spinner"),d.classList.add("show");const u=document.createElement("span");u.classList.add("loader"),d.append(u),l.append(d),a.append(l);const h=document.createElement("div");h.classList.add("single-wrapper"),c.append(h);const m=document.createElement("div");m.classList.add("post-image"),h.append(m);const p=document.createElement("img");p.classList.add("hub-single-image"),p.classList.add("hide"),p.classList.add(s),p.dataset.id=n,p.classList.add("lazy"),p.setAttribute("loading","lazy"),p.alt="IceGirls.AI generated image",new te({container:".generated-images-wrapper"}),async function(t,n,o,r,s){try{const a=await fetch(i+"agent-scheduler/v1/task/"+t+"/results?zip=false"),c=await a.json();if(!1!==c.success){let t=c.data[0].image;e?(n.src=t,r.append(n)):await z([t,themeUrl.themeUrl+"/assets/images/watermark.jpg"]).image(((e,t)=>{const n=e.getContext("2d"),o=e.width,r=e.height,i=.4*o,a=i/t.width*t.height;let c,l;return"512x512"===s?(c=o/10*.5,l=r/10*9):"512x768"===s?(c=o/9*1,l=r/16*15):(c=o/16*.5,l=r/9*5.75),n.save(),n.globalAlpha=.5,n.drawImage(t,c,l,i,a),n.restore(),e})).then((e=>r.appendChild(e))),o.classList.remove("show"),n.classList.remove("hide")}}catch(e){console.log(e)}}(n,p,d,m,o)}))}fetch(i+"agent-scheduler/v1/history?status=done&limit=12&offset=0").then((e=>e.json())).then((async e=>{if(e.total){e.total;const t=e.tasks;await a(0,t),new te({container:".generated-images-wrapper"})}})).catch((e=>{console.log(e)})),window.addEventListener("scroll",(async()=>{window.innerHeight+window.scrollY>=.6*document.body.offsetHeight&&await async function(){if(s)return;s=!0;const e="agent-scheduler/v1/history?status=done&limit=12&offset="+12*n;console.log(e);try{const t=await fetch(i+e),n=await t.json();n.total&&(n.total,a(0,n.tasks))}catch(e){console.log(e)}finally{n++,s=!1}}()}))})(),document.querySelector(".last-creations-wrapper")&&(e=>{console.log("work");const t=document.querySelector(".last-creations-wrapper"),n=document.querySelectorAll(".single-image"),o=(t.querySelectorAll(".hub-single-image"),new Headers);o.append("accept","application/json"),o.append("Content-Type","application/json");const r={method:"GET",headers:o,redirect:"follow",keepalive:!0};let s=themeUrl.apiUrl;n.forEach((e=>{const t=e.querySelector(".spinner"),n=e.querySelector(".hub-single-image");t.classList.add("show"),fetch(s+"agent-scheduler/v1/task/"+n.dataset.id+"/results?zip=false",r).then((e=>e.json())).then((o=>{if(!1!==o.success){console.log("false");let e=o.data[0].image;n.src=e,t.classList.remove("show"),n.classList.remove("hide")}else s=themeUrl.apiUrlFree,fetch(s+"agent-scheduler/v1/task/"+n.dataset.id+"/results?zip=false",r).then((e=>e.json())).then((o=>{if(!1!==o.success){let e=o.data[0].image;n.src=e,t.classList.remove("show"),n.classList.remove("hide")}else e.classList.add("hide")})).catch((e=>{console.error(e)}))})).catch((e=>{console.error(e)}))}))})(),document.querySelector("form.content-removal")&&K(),document.querySelector("form.contact-support")&&(ee(),function(e=[]){var t,n,o,r,s,i,a,c,l;for(r=(t=e.length?e:document.getElementsByClassName("cc-custom-selector")).length,n=0;n<r;n++){for(s=(i=t[n].getElementsByTagName("select")[0]).length,(a=document.createElement("DIV")).setAttribute("class","select-selected"),a.innerHTML=i.options[i.selectedIndex].innerHTML,i.options[i.selectedIndex].dataset.doc&&a.setAttribute("data-doc",i.options[i.selectedIndex].dataset.doc),t[n].appendChild(a),(c=document.createElement("DIV")).setAttribute("class","select-items select-hide"),o=1;o<s;o++)(l=document.createElement("DIV")).innerHTML=i.options[o].innerHTML,i.options[o].dataset.doc&&l.setAttribute("data-doc",i.options[o].dataset.doc),l.addEventListener("click",(function(e){var t,n,o,r,s,i,a;for(i=(r=this.parentNode.parentNode.getElementsByTagName("select")[0]).length,s=this.parentNode.previousSibling,n=0;n<i;n++)if(r.options[n].innerHTML==this.innerHTML){for(r.selectedIndex=n,r.dispatchEvent(new Event("change")),s.innerHTML=this.innerHTML,a=(t=this.parentNode.getElementsByClassName("same-as-selected")).length,o=0;o<a;o++)t[o].removeAttribute("class");this.setAttribute("class","same-as-selected");break}s.click()})),c.appendChild(l);t[n].appendChild(c),a.addEventListener("click",(function(e){e.stopPropagation(),d(this),this.nextSibling.classList.toggle("select-hide"),this.classList.toggle("select-arrow-active")}))}function d(e){var t,n,o,r,s,i=[];for(t=document.getElementsByClassName("select-items"),n=document.getElementsByClassName("select-selected"),r=t.length,s=n.length,o=0;o<s;o++)e==n[o]?i.push(o):n[o].classList.remove("select-arrow-active");for(o=0;o<r;o++)i.indexOf(o)&&t[o].classList.add("select-hide")}document.addEventListener("click",d)}()),document.querySelector(".faqs-block")&&(()=>{const e=document.querySelectorAll(".faq-title-block");document.querySelectorAll(".faq-answer-blocke"),e.forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault();const n=e.nextElementSibling;e.classList.toggle("active"),n.classList.toggle("active"),n.style.maxHeight?n.style.maxHeight=null:n.style.maxHeight="calc("+n.scrollHeight+"px + 1rem)"}))}))})(),document.querySelector(".upscale-single-image")&&(()=>{const e=document.querySelector(".upscale-single-image");let t=!1;e.addEventListener("click",(async n=>{if(n.preventDefault(),V()){t=!0,e.textContent="Upscaling...";const n=document.querySelector(".hub-single-image").src;n&&(console.log(n),await R(t,n)&&(e.disabled=!0,e.textContent="Upscaled"))}else t=!1,document.querySelector(".premium-modal").classList.add("show")}))})(),document.querySelector(".cancel-sub")&&re(),document.querySelector(".age-verification")){(()=>{const e=document.querySelector(".confirm-age"),t=document.querySelector(".age-verification"),n=document.querySelector("html"),o=document.querySelector(".decline-age");e.addEventListener("click",(e=>{r()})),o.addEventListener("click",(e=>{e.preventDefault(),window.location="https://www.google.com/"}));const r=()=>{localStorage.setItem("age","18"),n.classList.remove("modal-is-open"),t.classList.remove("show")};window.addEventListener("click",(e=>{e.target.classList.contains("age-verification")&&r()})),window.addEventListener("keyup",(function(e){27==e.keyCode&&r()}))})();const e=document.querySelector(".age-verification"),t=document.querySelector("html");"18"===localStorage.getItem("age")?e.classList.add("disabled"):(e.classList.add("show"),t.classList.add("modal-is-open"))}if(document.querySelector(".featured-block"))for(var e=document.querySelectorAll(".logo-slider"),t=0;t<e.length;t++)new(oe())(e[t],{width:"100%",perPage:3,gap:"1.5rem",pagination:!1,arrows:!0,focus:"center",breakpoints:{900:{perPage:2,focus:"left"},700:{perPage:1,gap:0}}}).mount()}))})()})();